<p style="z-index: 1050;position: relative; padding-left:30px" class="navbar-brand"
    [ngStyle]="{'margin-top':isChromeVerGreaterThan100 === true ? '-64px' : '6px' }">
    Integrations
</p>


<div class="integrations-content">

    <div class="list">

        <mat-accordion *ngFor="let category of CATEGORIES">
            <mat-expansion-panel expanded="true" class="custom-expansion-panel" hideToggle>
                <mat-expansion-panel-header class="disable_ripple">
                    <mat-panel-title>
                        {{ category.name }}
                    </mat-panel-title>
                </mat-expansion-panel-header>

                <div *ngFor="let integration of INTEGRATIONS">
                    <div *ngIf="integration.category === category.type" class="element"
                        [ngClass]="{'element-selected': integrationSelectedName === integration.key }"
                        (click)="onIntegrationSelect(integration)">

                        <img [src]="integration.src_icon" alt="{{integration.name}}">
                        <p>{{ integration.name }}</p>
                        <span *ngIf="integration.pro === true" class="pro-badge">Pro</span>
                        <!-- <div *ngIf="integration.pro === true" class="pro-badge">
                            <p>Pro</p>
                        </div> -->
                    </div>
                </div>

            </mat-expansion-panel>
        </mat-accordion>

        <!-- <mat-accordion>
            <mat-expansion-panel expanded="true" class="custom-expansion-panel" hideToggle>
                <mat-expansion-panel-header class="disable_ripple">
                    <mat-panel-title>
                        Artificial Intelligence
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <div class="element" (click)="onIntegrationSelect('openai')"
                    [ngClass]="{'element-selected': integrationSelectedName === 'openai' }">
                    <img src="../../assets/cds/images/actions/openai-icon.svg" alt="OpenAI">
                    <p>OpenAI</p>
                </div>
            </mat-expansion-panel>
        </mat-accordion>

        <mat-accordion>
            <mat-expansion-panel expanded="true" class="custom-expansion-panel" hideToggle>
                <mat-expansion-panel-header class="disable_ripple">
                    <mat-panel-title>
                        CRM
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <div class="element" (click)="onIntegrationSelect('customerio')"
                    [ngClass]="{'element-selected': integrationSelectedName === 'customerio' }">
                    <img src="../../assets/img/customerio.png" alt="Customer.io'">
                    <p>Customer.io</p>
                </div>
                <div class="element" (click)="onIntegrationSelect('hubspot')"
                    [ngClass]="{'element-selected': integrationSelectedName === 'hubspot' }">
                    <img src="../../assets/img/hubspot.png" alt="Hubspot'">
                    <p>Hubspot</p>
                </div>
                <div class="element" (click)="onIntegrationSelect('brevo')"
                    [ngClass]="{'element-selected': integrationSelectedName === 'brevo' }">
                    <img src="../../assets/img/brevo.png" alt="Brevo'">
                    <p>Brevo (Sendinblue)</p>
                </div>
            </mat-expansion-panel>
        </mat-accordion>

        <mat-accordion>
            <mat-expansion-panel expanded="true" class="custom-expansion-panel" hideToggle>
                <mat-expansion-panel-header class="disable_ripple">
                    <mat-panel-title>
                        E-Commerce
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <div class="element" (click)="onIntegrationSelect('qapla')"
                    [ngClass]="{'element-selected': integrationSelectedName === 'qapla' }">
                    <img src="../../assets/img/qapla.jpg" alt="Qapla'">
                    <p>Qapla'</p>
                </div>
            </mat-expansion-panel>
        </mat-accordion>

        <mat-accordion>
            <mat-expansion-panel expanded="true" class="custom-expansion-panel" hideToggle>
                <mat-expansion-panel-header class="disable_ripple">
                    <mat-panel-title>
                        Data/File Storage
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <div class="element" (click)="onIntegrationSelect('gsheets')"
                    [ngClass]="{'element-selected': integrationSelectedName === 'gsheets' }">
                    <img src="../../assets/img/google_sheets.png" alt="Google Sheets'">
                    <p>Google Sheets</p>
                </div>
            </mat-expansion-panel>
        </mat-accordion> -->
    </div>

    <div *ngIf="integrationSelectedName !== 'none'" class="menu-container">
        
        <integration-header 
            [integrationModel]="selectedIntegrationModel"></integration-header>

        <div *ngIf="integrationLocked === false" class="integration-outer-container">

            <brevo-integration 
                *ngIf="integrationSelectedName === INT_KEYS.BREVO"
                [integration]="selectedIntegration" 
                (onUpdateIntegration)=integrationUpdateEvent($event)
                (onDeleteIntegration)=integrationDeletedEvent($event)>
            </brevo-integration>

            <customerio-integration 
                *ngIf="integrationSelectedName === INT_KEYS.CUSTOMERIO"
                [integration]="selectedIntegration" 
                (onUpdateIntegration)=integrationUpdateEvent($event)
                (onDeleteIntegration)=integrationDeletedEvent($event)>
            </customerio-integration>

            <!-- // NOT VISIBLE -->
            <gsheets-integration *ngIf="integrationSelectedName === 'gsheets'">
            </gsheets-integration>

            <hubspot-integration 
                *ngIf="integrationSelectedName === INT_KEYS.HUBSPOT"
                [integration]="selectedIntegration" 
                (onUpdateIntegration)=integrationUpdateEvent($event)
                (onDeleteIntegration)=integrationDeletedEvent($event)>
            </hubspot-integration>

            <openai-integration 
                *ngIf="integrationSelectedName === INT_KEYS.OPENAI" 
                [integration]="selectedIntegration"
                (onUpdateIntegration)=integrationUpdateEvent($event)
                (onDeleteIntegration)=integrationDeletedEvent($event)>
            </openai-integration>

            <qapla-integration 
                *ngIf="integrationSelectedName === INT_KEYS.QAPLA" 
                [integration]="selectedIntegration"
                (onUpdateIntegration)=integrationUpdateEvent($event)
                (onDeleteIntegration)=integrationDeletedEvent($event)>
            </qapla-integration>

        </div>

        <div *ngIf="integrationLocked === true" style="width: 100%;">
            <div class="lock-container">
                <img src="assets/img/int/upgrade-icon.svg" alt="Upgrade Plan">
                
                <p *ngIf="integrationSelectedName === INT_KEYS.OPENAI" class="upgrade-title">Upgrade your plan!</p>
                <p *ngIf="integrationSelectedName === INT_KEYS.OPENAI" class="upgrade-subtitle">Tiledesk provides a managed ChatGPT integration. You don't need to use your own OpenAI api-key. This option simplifies using OpenAI features through all the Tiledesk modules supporting it (Ask Knowledge base, Designer's ChatGPT Task Action etc.)</p>
                <p *ngIf="integrationSelectedName === INT_KEYS.OPENAI" class="upgrade-subtitle">This integration is available to allow you to use your own OpenAI API-KEY, if needed.</p>
                <p *ngIf="integrationSelectedName === INT_KEYS.OPENAI" class="upgrade-subtitle">Available from <b>{{ plan_require }} Plan</b> </p>

                <p *ngIf="integrationSelectedName !== INT_KEYS.OPENAI" class="upgrade-title">Upgrade your plan!</p>
                <p *ngIf="integrationSelectedName !== INT_KEYS.OPENAI" class="upgrade-subtitle">This integration is available starting from <b>{{ plan_require }}</b> Plan. Unlock it by upgrading your plan.</p>
    
                <button class="custom-upgrade-primary-button" (click)="goToPricing()">Upgrade now</button>
            </div>
        </div>

    </div>
    

</div>