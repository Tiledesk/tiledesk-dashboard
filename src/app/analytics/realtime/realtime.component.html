<div class="row" style="text-align: center; margin-top:35px">
    <div class="col-md-12">
        <h4 class="section-title">
            {{ 'Analytics.RealTimeMonitoring' | translate}}
        </h4>
    </div>
</div>

<!-- // START ALL THE REQUESTS COUNT (SERVED UNSERVED ACTIVE) -->
<div class="row">
    <!-- ============ TOTAL ACTIVE - OVER ALL THE REQUESTS ============ -->
    <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">
        <div class="card card-stats" style="border-radius: 10px;">

            <div class="card-header tiledesk_card_header">

                <!-- <svg viewBox="0 0 58.1 53.9" style="width: 42px; position: relative; top: 7px" xml:space="preserve">
                    <style type="text/css">
                        .st0-chat-active {
                            fill: none;
                            stroke: #ff9800;
                            stroke-width: 3;
                            stroke-miterlimit: 10;
                        }
                    </style>
                    <path class="st0-chat-active" d="M30.1,2.6c-13.8,0-25,10-25,22.4c0,4.6,1.5,8.8,4.1,12.3C8.9,41.4,7.9,47.2,5.1,50c0,0,8.6-1.2,14.4-4.7
                        c3.2,1.4,6.8,2.1,10.6,2.1c13.8,0,25-10,25-22.4S43.9,2.6,30.1,2.6z" />
                </svg> -->
            </div>

            <div class="card-content" style="text-align: center">

                <p class="card_content_header">
                    <span class="card_content_header_last_update">
                        <i class="material-icons card_content_header_last_update_icons">
                            update
                        </i>
                        {{ "Updated" | translate }}: {{ date | amTimeAgo }}
                    </span>
                </p>

                <div class="request_count" style="color: #ff9800">

                    <span class="request_count_icons_numbers">
                        {{ global_activeRequestsCount }}
                    </span>

                </div>

                <span style="color: #ff9800">
                    <span *ngIf="global_activeRequestsCount > 1 || global_activeRequestsCount == 0">
                        {{ "Requests" | translate }}
                    </span>
                    <span *ngIf="global_activeRequestsCount == 1">
                        {{ "Request" | translate }}
                    </span>
                </span>

            </div>
            <div class="card-footer request_count_footer">
                {{ "TotalActive" | translate }}
            </div>
        </div>
    </div>

    <!-- ============ SERVED - OVER ALL THE REQUESTS ============ -->
    <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">
        <div class="card card-stats" style="border-radius: 10px;">

            <div class="card-header tiledesk_card_header">

                <!-- <svg viewBox="0 0 58.1 53.9" style="width: 42px; position: relative; top: 7px" xml:space="preserve">
                    <style type="text/css">
                        .st0-served {
                            fill: none;
                            stroke: #05BDD4;
                            stroke-width: 3;
                            stroke-miterlimit: 10;
                        }

                        .st1-served {
                            fill: #05BDD4;
                        }
                    </style>
                    <g>
                        <path class="st0-served" d="M30.5,3c-13.8,0-25,10-25,22.4c0,4.6,1.5,8.8,4.1,12.3c-0.3,4.1-1.3,9.9-4.1,12.7c0,0,8.6-1.2,14.4-4.7
                        c3.2,1.4,6.8,2.1,10.6,2.1c13.8,0,25-10,25-22.4S44.3,3,30.5,3z" />
                        <g>
                            <circle class="st1-served" cx="17.5" cy="26.7" r="3" />
                            <circle class="st1-served" cx="30.5" cy="26.7" r="3" />
                            <circle class="st1-served" cx="43.5" cy="26.7" r="3" />
                        </g>
                    </g>
                </svg> -->
            </div>

            <div class="card-content" style="text-align: center;">

                <p class="card_content_header">
                    <span class="card_content_header_last_update">
                        <i class="material-icons card_content_header_last_update_icons">
                            update
                        </i>
                        {{ "Updated" | translate }}: {{ date | amTimeAgo }}
                    </span>
                </p>

                <div class="request_count" style="color: #00bcd4">

                    <span class="request_count_icons_numbers">
                        {{ global_servedRequestsCount }}
                    </span>

                </div>

                <span style="color: #00bcd4">
                    <span *ngIf="global_servedRequestsCount > 1 || global_servedRequestsCount == 0">
                        {{ "Requests" | translate }}
                    </span>
                    <span *ngIf="global_servedRequestsCount == 1">
                        {{ "Request" | translate }}
                    </span>
                </span>
            </div>

            <div class="card-footer request_count_footer">
                {{ "Served" | translate }}
            </div>
        </div>
    </div>

    <!-- ============ UNSERVED - COUNT OVER ALL THE REQUESTS ============ -->
    <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">
        <div class="card card-stats" style="border-radius: 10px;">

            <div class="card-header tiledesk_card_header">

                <!-- <svg viewBox="0 0 58.1 53.9" style="width: 42px; position:relative; top:7px" xml:space="preserve">
                    <style type="text/css">
                        .st0-unserved {
                            fill: none;
                            stroke: #ED4537;
                            stroke-width: 3;
                            stroke-miterlimit: 10;
                        }

                        .st1-unserved {
                            fill: #ED4537;
                        }
                    </style>
                    <path class="st0-unserved" d="M30.5,3.3c-13.8,0-25,10-25,22.4c0,4.6,1.5,8.8,4.1,12.3c-0.3,4.1-1.3,9.9-4.1,12.7c0,0,8.6-1.2,14.4-4.7
                        c3.2,1.4,6.8,2.1,10.6,2.1c13.8,0,25-10,25-22.4S44.3,3.3,30.5,3.3z" />
                    <g>
                        <path class="st1-unserved"
                            d="M30.6,38.9c-1.7,0-3.1-1.4-3.1-3c0-1.7,1.4-3,3.1-3c1.7,0,3.1,1.4,3.1,3C33.6,37.6,32.3,38.9,30.6,38.9z" />
                        <path class="st1-unserved" d="M34.8,18l-1.5,10c-0.2,1.5-1.6,2.5-3.1,2.3c-1.2-0.2-2.1-1.1-2.3-2.2l-1.6-10c-0.4-2.3,1.2-4.5,3.6-4.9
                        c2.4-0.4,4.6,1.2,5,3.5C34.9,17.1,34.9,17.6,34.8,18z" />
                    </g>
                </svg> -->


            </div>

            <div class="card-content" style="text-align: center;">

                <p class="card_content_header">
                    <span class="card_content_header_last_update">
                        <i class="material-icons card_content_header_last_update_icons">
                            update
                        </i>
                        {{ "Updated" | translate }}: {{ date | amTimeAgo }}
                    </span>
                </p>

                <div class="request_count" style="color: #f44336">

                    <span class="request_count_icons_numbers">
                        {{ global_unservedRequestsCount }}
                    </span>
                </div>
                <span style="color: #f44336">
                    <span *ngIf="global_unservedRequestsCount > 1 || global_unservedRequestsCount == 0">
                        {{ "Requests" | translate }}
                    </span>
                    <span *ngIf="global_unservedRequestsCount == 1">
                        {{ "Request" | translate }}
                    </span>
                </span>

            </div>
            <div class="card-footer request_count_footer">
                {{ "Unserved" | translate }}
            </div>
        </div>
    </div>
</div>
<!-- // END GLOBAL REQUESTS COUNT (SERVED UNSERVED ACTIVE) -->
<div class="row">
    <!-- /// start ======== --- TABLE "REQUESTS X AGENT" --- ======== /// -->
    <div class="col-md-4">
        <div class="card">
            <div class="card-header card-header-custom"
                style="background-color: #fff; padding-top: 12px;padding-bottom: 10px;">
                <h4 class="c21-title" style="margin-bottom:2px; margin-top:2px;">

                    {{ "RequestsForAgent" | translate }}

                </h4>
            </div>

            <loading-spinner *ngIf="showSpinner"></loading-spinner>
            <div *ngIf="!showSpinner" class="card-content table-responsive" style="padding-top: 0px">
                <table class="table table-hover">

                    <thead>
                        <tr>
                            <!-- ------====== column IMAGE (note: THE COLUMN HEADING IS 'USER') ======------ -->
                            <th>
                                <!-- <span style="color: #566787">
                                      <strong>
                                      {{ "UsersPage.User" | translate }}
                                      </strong>
                                  </span> -->
                            </th>
                            <!-- ------====== column USER (NAME + LASTNAME) ======------ -->
                            <th>
                                <!-- <span style="color: #566787">
                                      <strong>
                                      {{ "UsersPage.User" | translate }}
                                      </strong>
                                  </span> -->
                            </th>

                            <!-- ------====== column # OF ASSIGNEDE REQUESTS  ======------ -->
                            <th>
                                <!-- <span style="color: #566787">
                                      <strong>
                                      #
                                      </strong>
                                  </span> -->
                            </th>
                        </tr>
                    </thead>

                    <tbody>
                        <!-- (click)="goToMemberProfile(member?.id_user?._id)" -->
                        <tr *ngFor="let member of projectUsers">
                            <td style="width:45px; padding-top:4px !important; padding-bottom:4px!important; cursor:pointer"
                                (click)="goToMemberProfile(member?._id)">

                                <img *ngIf="UPLOAD_ENGINE_IS_FIREBASE"
                                    class="user-img-in-realtime-analytics"
                                    src="https://firebasestorage.googleapis.com/v0/b/{{storageBucket}}/o/profiles%2F{{member?.id_user?._id}}%2Fphoto.jpg?alt=media"
                                    onerror="this.src='assets/img/no_image_user.png'" />

                                <img *ngIf="!UPLOAD_ENGINE_IS_FIREBASE"
                                    class="user-img-in-realtime-analytics"
                                    src="{{baseUrl}}images?path=uploads%2Fusers%2F{{member?.id_user?._id}}%2Fimages%2Fthumbnails_200_200-photo.jpg"
                                    onerror="this.src='assets/img/no_image_user.png'" />

                                <!-- <img *ngIf="userProfileImageExist !== true" style="vertical-align: middle; width: 60px; height: 60px; border-radius: 50%; border: 1px solid #eee; margin-right: 15px;" 
                                  class="user-img" src="assets/img/no_image_user.png"/> -->

                            </td>
                            <!-- (click)="goToMemberProfile(member?.id_user?._id)" -->
                            <td style="font-weight: 400;cursor:pointer" (click)="goToMemberProfile(member?._id)">
                                {{ member?.id_user?.firstname }} {{ member?.id_user?.lastname }} 
                            </td>

                            <td>
                                <span style="font-weight: 400"> {{ member?.value }}</span>
                                <!-- <span style="color: #999999; font-size:0.9em"> request </span> -->
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <!-- /// end ======== --- TABLE "REQUESTS X AGENT" --- ======== /// -->

    <!-- /// start ======== --- TABLE "REQUESTS X DEPTS" --- ======== /// -->
    <div class="col-md-4">
        <div class="card" style="border-radius: 10px">
            <div class="card-header card-header-custom"
                style="background-color: #fff; padding-top: 12px;padding-bottom: 10px;">
                <h4 class="c21-title" style="margin-bottom:2px; margin-top:2px;">

                    {{ "RequestsForDept" | translate }}

                </h4>
            </div>

            <!-- <loading-spinner *ngIf="showSpinner"></loading-spinner> -->
            <div class="card-content table-responsive" style="padding-top: 0px">
                <table class="table table-hover">

                    <thead>
                        <tr>
                            <!-- ------====== column DEPT NAME ======------ -->
                            <th> </th>

                            <!-- ------====== column # OF ASSIGNED REQUESTS  ======------ -->
                            <th> </th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr *ngFor="let dept of departments">
                            <!-- *ngIf="dept.default === false" -->
                            <td style="cursor:pointer; font-weight: 400;" (click)="goToEditAddPage_EDIT(dept?._id)">
                                {{ dept?.name }}
                            </td>

                            <!-- *ngIf="dept.default === false" -->
                            <td>
                                <span style="font-weight: 400">
                                    {{ dept?.value }}
                                </span>
                                <!-- <span style="color: #999999; font-size:0.9em"> request </span> -->
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- /// start ======== --- CARD "LAST MONTH REQUESTS COUNT" --- ======== /// -->
    <div class="col-md-4">
        <div class="card card-stats" style="border-radius: 10px; margin-top:0px">

            <div class="card-header tiledesk_card_header">

                <!-- <svg viewBox="0 0 58.1 53.9" style="width: 42px; position: relative; top: 7px" xml:space="preserve">
                    <style type="text/css">
                        .st0-chat-active {
                            fill: none;
                            stroke: #ff9800;
                            stroke-width: 3;
                            stroke-miterlimit: 10;
                        }
                    </style>
                    <path class="st0-chat-active" d="M30.1,2.6c-13.8,0-25,10-25,22.4c0,4.6,1.5,8.8,4.1,12.3C8.9,41.4,7.9,47.2,5.1,50c0,0,8.6-1.2,14.4-4.7
                          c3.2,1.4,6.8,2.1,10.6,2.1c13.8,0,25-10,25-22.4S43.9,2.6,30.1,2.6z" />
                </svg> -->
            </div>

            <div class="card-content" style="text-align: center">

                <div class="request_count" style="color: #ff9800">

                    <span class="request_count_icons_numbers">
                        {{ lastMonthrequestsCount }}
                    </span>

                </div>

                <span style="color: #ff9800">
                    <span *ngIf="lastMonthrequestsCount > 1 || lastMonthrequestsCount == 0"> {{ "Requests" | translate
                        }} </span>
                    <span *ngIf="lastMonthrequestsCount == 1"> {{ "Request" | translate }} </span>
                </span>

            </div>
            <div class="card-footer request_count_footer" style="margin-bottom: 11px;">
                {{ "LastMonth" | translate }}
            </div>
        </div>
    </div>


</div>