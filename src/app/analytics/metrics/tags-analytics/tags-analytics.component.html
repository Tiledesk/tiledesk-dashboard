<div class="row" style="text-align: center; margin-top:35px">
    <div class="col-md-12">
        <h4 class="section-title">
            {{ 'Analytics.ConversationsTags' | translate }}
        </h4>
    </div>
</div>

<div class="row" style="text-align: center; margin-top:6px">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="card graph-card">

            <div class="graph-card-header">
                <div class="graph-card-header-title">
                    {{ 'Analytics.TagsAnalysis' | translate}}
                </div>
                <div class="graph-card-header-filter-range">
                    <span class="analytics-date-range-selected">
                        {{initDay}} <i class="material-icons arrow_forward-custom"> arrow_forward </i> {{endDay}}
                    </span>
                </div>
                <div class="graph-options">
                    <div class="analytics-date-range-filter-wpr">
                        <div class="analytics-date-range-filter-label">
                            <!-- {{ 'Analytics.FilterReport' | translate }} -->
                            {{ 'Analytics.FilterByTheLastNDays' | translate }}

                        </div>

                        <div class="analytics-date-range-filter-select">
                            <ng-select class="custom" name="days" [(ngModel)]="selectedDaysId" [clearable]="false"
                                (change)="daysSelect(selectedDaysId)" placeholder="{{'SelectAnOption' | translate }}">
                                <ng-option [value]="7">
                                    {{ 'Analytics.Last' | translate}} 7 {{ 'Analytics.Days' |translate}}
                                </ng-option>
                                <ng-option [value]="15">
                                    {{ 'Analytics.Last' | translate}} 15 {{ 'Analytics.Days' |translate}}
                                </ng-option>
                                <ng-option [value]="30">
                                    {{ 'Analytics.Last' | translate}} 30 {{ 'Analytics.Days' | translate}}
                                </ng-option>
                                <!-- <ng-option [value]="90">
                                    {{ 'Analytics.Last' | translate}} 3 {{ 'Analytics.Months' |translate}}
                                </ng-option> -->
                                <!-- <ng-option [value]="180">
                                    {{ 'Analytics.Last' | translate}} 6 {{ 'Analytics.Months' | translate}}
                                </ng-option>
                                <ng-option [value]="360">
                                    {{ 'Analytics.Last' | translate}} 1 {{ 'Analytics.Year' | translate}}
                                </ng-option> -->
                            </ng-select>

                        </div>
                    </div>
                   

                    <!-- ------------------------------- -->
                    <!-- Date Picker -->
                    <!-- ------------------------------- -->
                    <div class="date-picker-wpr">

                        <div class="analytics-options-label">
                            {{ 'Analytics.FilterByCustomRange' | translate}} 
                            <span  class="info-icon-wpr"
                                matTooltipClass="custom-mat-tooltip" 
                                matTooltip="{{ 'Analytics.MaxRange30Days' | translate}}"
                                #tooltip="matTooltip" 
                                matTooltipPosition='above' 
                                matTooltipHideDelay="100"> 
                                <i class="material-icons"> help_outline </i>
                            </span>
                        </div>

                        <div class="analytics-date-picker">
                            <mat-form-field class="tags-analytics-date-range-picker" appearance="standard">
                                <!-- <mat-label>Select a date range</mat-label> -->
                                <mat-date-range-input [rangePicker]="picker" [min]="minEndDate" [max]="maxEndDate">
                                    <input matStartDate placeholder="{{'StartDate' | translate}}" [(ngModel)]="startDate"
                                        (dateChange)="onSelectStartDate($event.value)">
                                    <input matEndDate placeholder="{{'EndDate' | translate}}" [(ngModel)]="endDate"
                                        (dateChange)="onSelectEndDate($event.value)">
                                </mat-date-range-input>
                                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                <mat-datepicker-toggle matSuffix (click)="clearDateRange()">
                                    <mat-icon matDatepickerToggleIcon>clear</mat-icon>
                                </mat-datepicker-toggle>
                                <mat-date-range-picker #picker></mat-date-range-picker>
                            </mat-form-field>
                        </div>

                        <!-- <div class="analytics-label-on-bottom">
                            {{ 'Analytics.MaxRange30Days' | translate}}
                        </div> -->
                    </div>

                    <!-- ------------------------------- -->
                    <!-- Graph Type -->
                    <!-- ------------------------------- -->
                    <div class="graph-type-options-wpr">
                        <div class="analytics-options-label">
                            {{ 'Analytics.GraphType' | translate}}
                        </div>

                        <div class="graph-type-select">
                            <div class="graph-type-select-btns-wrp">


                                <div class="graph-type-select-btn-wrp">

                                    <!-- Stacked columns -->
                                    <button class="graph-type-select-btn" matTooltipClass="custom-mat-tooltip"
                                        matTooltip="{{'Analytics.StackedColumns' | translate}}" #tooltip="matTooltip"
                                        matTooltipPosition='below' matTooltipHideDelay="100"
                                        (click)="onSelectStackedColmunsGraphType(true)"
                                        [ngClass]="{'active-column-graph': chartStackedColumns}">

                                        <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24"
                                            viewBox="0 0 24 24" fill="none">
                                            <g>
                                                <rect fill="none" height="24" width="24" />
                                                <g>
                                                    <path
                                                        d="M19,3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h14c1.1,0,2-0.9,2-2V5C21,3.9,20.1,3,19,3z M19,19H5V5h14V19z" />
                                                    <rect height="5" width="2" x="7" y="12" />
                                                    <rect height="10" width="2" x="15" y="7" />
                                                    <rect height="3" width="2" x="11" y="14" />
                                                    <rect height="2" width="2" x="11" y="10" />
                                                </g>
                                            </g>
                                        </svg>

                                    </button>

                                </div>
                                <div class="graph-type-btn-wrp">

                                    <!-- Basic columns -->
                                    <button class="graph-type-select-btn" matTooltipClass="custom-mat-tooltip"
                                        matTooltip="{{'Analytics.BasicColumns' | translate}}" #tooltip="matTooltip"
                                        matTooltipPosition='below' matTooltipHideDelay="100"
                                        (click)="onSelectBasicColmunsGraphType(true)"
                                        [ngClass]="{'active-column-graph': chartBasicColumns}">

                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none">
                                            <path d="M0 0h24v24H0V0z" fill="none" />
                                            <path
                                                d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zM7 10h2v7H7zm4-3h2v10h-2zm4 6h2v4h-2z" />
                                        </svg>

                                    </button>

                                </div>

                            </div>
                        </div>
                    </div>

                </div>
           
                <div *ngIf="isLoading" class="chart-loading-spinner">
                    <!-- <mat-spinner></mat-spinner> -->
                    <loading-spinner></loading-spinner>
                    <p>{{ 'Processing' | translate}}</p>
                </div>
              
                <div *ngIf="!isLoading" class="card-content"
                    style=" margin:0px auto; padding-top: 0px;padding-bottom: 10px;">
                    <div id="chart" *ngIf='chartOptions'>
                        <apx-chart [series]="chartOptions.series" [chart]="chartOptions.chart"
                            [dataLabels]="chartOptions.dataLabels" [plotOptions]="chartOptions.plotOptions"
                            [xaxis]="chartOptions.xaxis" [stroke]="chartOptions.stroke" [fill]="chartOptions.fill"
                            [yaxis]="chartOptions.yaxis" [title]="chartOptions.title" [tooltip]="chartOptions.tooltip"
                            [legend]="chartOptions.legend">
                        </apx-chart>
                    </div>
                </div>
            </div>
        </div>
    </div>