<!-- <span class="navbar-brand navbar-brand-sidebar-settings"
  [ngStyle]="{'margin-top':isChromeVerGreaterThan100 === true ? '-64px' : '6px' }"
  [ngClass]="{'is_opened':IS_OPEN_SETTINGS_SIDEBAR, 'is_closed':!IS_OPEN_SETTINGS_SIDEBAR }">
  <i class="material-icons">settings</i>
  <span *ngIf="IS_OPEN_SETTINGS_SIDEBAR">Chatbots </span>
</span> -->
<span class="navbar-brand navbar-brand-sidebar-settings"
  [ngStyle]="{'margin-top':isChromeVerGreaterThan100 === true ? '-64px' : '6px' }"
  [ngClass]="{'is_opened':IS_OPEN_SETTINGS_SIDEBAR, 'is_closed':!IS_OPEN_SETTINGS_SIDEBAR }">
  
    <div class="chatbot-svg-icon"> 
      <svg   version="1.1" id="Objects" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
      viewBox="0 0 30 30" style="enable-background:new 0 0 30 30;width: 29px;height: 29px;" xml:space="preserve">
        <style type="text/css">
          .cb--0{fill:#3C4858;}
        </style>
        <g>
          <path class="cb--0" d="M24.6,12.6c-0.1,0-0.2,0-0.3,0c-1.6-2.9-4.5-5.8-9.2-5.8s-7.6,2.9-9.2,5.8c-0.2,0-0.4-0.1-0.6-0.1
            c-2,0-3.5,2.3-3.5,5c0,2.8,1.6,5,3.5,5c0.1,0,0.3,0,0.4,0c2.3,3.6,7,3.9,9.4,3.9c2.3,0,6.9-0.5,9.2-3.9c0.1,0,0.1,0,0.2,0
            c2,0,3.5-2.3,3.5-5C28.1,14.8,26.6,12.6,24.6,12.6z M22,21.1c0,0-7.8,2.3-14.3-0.1c0,0-0.8-4.1-0.5-7.2c0,0,8.1-3.2,15.6,0.3
            C22.8,14.1,23.3,19.1,22,21.1z"/>
          <ellipse class="cb--0" cx="11.9" cy="17.4" rx="0.7" ry="1.4"/>
          <ellipse class="cb--0" cx="18.1" cy="17.4" rx="0.7" ry="1.4"/>
          <path class="cb--0" d="M14.5,5.3v1.1h1V5.3C15.8,5.1,16,4.8,16,4.5c0-0.5-0.4-0.9-1-0.9c-0.5,0-0.9,0.4-0.9,0.9
            C14.1,4.8,14.2,5.1,14.5,5.3z"/>
        </g>
        </svg>

    </div>

  <span class="chatbot-sidebar-title" *ngIf="IS_OPEN_SETTINGS_SIDEBAR">Chatbots </span>

</span>




<div class="main-content" style="padding-top:0px; padding-left: 5px;padding-right: 5px;">
  <div class="page-title--sidebar-settings"
	[ngClass]="{'page-title--sidebar-settings_opened':IS_OPEN_SETTINGS_SIDEBAR, 'page-title--sidebar-settings_closed':!IS_OPEN_SETTINGS_SIDEBAR }">
    My Chatbots
	</div>
  <div class="container-fluid" style="padding-left: 5px;padding-right: 5px;">

    <div class="content-wpr" style="display: flex;">

      <appdashboard-bots-sidebar [allTemplatesCount]="allTemplatesCount"
        [allCommunityTemplatesCount]="allCommunityTemplatesCount"
        [customerSatisfactionTemplatesCount]="customerSatisfactionTemplatesCount"
        [increaseSalesTemplatesCount]="increaseSalesTemplatesCount" 
        [myChatbotOtherCount]="myChatbotOtherCount"
        [customerSatisfactionBotsCount]="customerSatisfactionBotsCount"
        [increaseSalesBotsCount]="increaseSalesBotsCount"
        [kbCount]="kbCount">
      </appdashboard-bots-sidebar>
      <div class="teplate-content" style="flex: 1 1 auto; margin-left: 20px;">

        <!-- -------------------------------------------------------------------- -->
        <!-- Alert displayed when the number of chatbot exceed the chatbot limit -->
        <!-- -------------------------------------------------------------------- -->
    
        <ng-container *ngIf="chatBotLimit || chatBotLimit === 0 " > 
          <appdashboard-chatbot-alert *ngIf="chatBotCount > chatBotLimit && isVisiblePAY"></appdashboard-chatbot-alert>
        </ng-container>
        <div class="row">
          <div class="col-xs-12">
            <button class="btn btn-new btn-size-m btn--primary pull-right" (click)="createBlankTilebot()"
              style="margin-right: 20px; box-shadow: unset;">
              Create from scratch
            </button>
            <button class="btn btn-new btn-size-m btn--primary pull-right" (click)="goToBotAllTemplates()"
              style="margin-right: 16px;box-shadow: unset;">
              Add from template
            </button>
          </div>
        </div>


        <div class="row">
          <div class="col-xs-12">

            <div class="card card--no-border" style="margin-top: 5px;">
              <!-- <div class="card-header card-header-custom-bkgrnd">

              </div> -->
              <!-- ------------------------------------------------------------------ -->
              <!-- Go to tempaltes -->
              <!-- ------------------------------------------------------------------ -->
              <!-- <div (click)="goToBotsTemplates()">Bot templates </div> -->

              <loading-spinner *ngIf="showSpinner"></loading-spinner>
              <!-- New chatbot list -->
              <div *ngIf="!showSpinner" class="main--wrapper">
                <div class="page-title--wrapper">
                   <div class="title--header">
                    <!-- {{ pageName }} -->
                  </div> 

                  <div class="page--actions" *ngIf="faqkbList && faqkbList?.length > 0">
                    <span class="order-by-label">Order by </span>

                    <div class="dropdown" (click)="isOpenDropdown(isOpen = !isOpen)">
                      <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <span class="order-by-selected-value" *ngIf="orderBylastUpdated">Last updates </span>
                        <span class="order-by-selected-value" *ngIf="orderByCreationDate">Creation date </span>
                        <span class="order-by-selected-value" *ngIf="orderByChatbotName">Name </span>
                        <span class="caret dropdown-caret"
                          [ngClass]="{'caret-rotate-0': is0penDropDown === false, 'caret-rotate-180': is0penDropDown === true}"></span>
                      </a>
                      <ul class="dropdown-menu" style="left: -53px;">
                        <li>
                          <a (click)="orderBy('lastUpdates')">
                            Last updates
                          </a>
                        </li>
                        <li>
                          <a (click)="orderBy('creationDate')">
                            Creation date
                          </a>
                        </li>
                        <li>
                          <a (click)="orderBy('botname')">
                            Name
                          </a>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>

                <div *ngIf="faqkbList && faqkbList?.length === 0" class="no-bot-tr-msg-wpr">

                  <p class="no-bot-msg">
                    <!-- <i class="material-icons" style="vertical-align: middle; margin-bottom: 2px;color: #00bcd4;">
                        info
                      </i>
                      {{ 'BotsPage.NoBot' | translate }} -->

                    <span style="display: block;">
                      You don't have Chatbots.
                    </span>
                    <span style="display: block;">
                      Get you started with a <span class="btn---link" (click)="goToBotAllTemplates()"> chatbot
                        template </span> or create a new one from scratch
                    </span>
                    <span style="display: block;">
                      <!-- <span class="btn---link" (click)="createBlankTilebot()"> create a new one from scratch
                        </span> -->

                      <button class="btn btn-new btn-size-m btn--primary center" (click)="createBlankTilebot()"
                        style="margin-right: 20px; box-shadow: unset;">
                        Create from scratch
                      </button>
                    </span>
                  </p>

                </div>

                <div class="card-list"  *ngFor="let faqkb of faqkbList; let i = index">

                  <div class="cl-card" (click)='goToBotDtls(faqkb)'>
                    <div class="cl-card-content">

                      <div class="cl-card-first-column">

                        <div class="bot-type-logo-wpr" *ngIf="faqkb.type === 'internal'">
                          <div class="bot-type-logo--img-wpr " style="top: -39px; left: 14px;">
                            <img class="bot-type-logo" src="assets/img/tiledesk_logo_no_text.png" />
                          </div>
                        </div>

                        <div class="bot-type-logo-wpr" *ngIf="faqkb.type === 'external'">
                          <div class="bot-type-logo--img-wpr" style="top: -39px; left: 14px;">
                            <img class="bot-type-logo" src="assets/img/external_bot_logo.png" />
                          </div>
                        </div>

                        <div class="bot-type-logo-wpr" *ngIf="faqkb.type === 'dialogflow'">
                          <div class="bot-type-logo--img-wpr ">
                            <img class="bot-type-logo" src="assets/img/Dialogflow_logo_no_text.png" />
                          </div>
                        </div>

                        <div class="bot-type-logo-wpr" *ngIf="faqkb.type === 'rasa'">
                          <div class="bot-type-logo--img-wpr ">
                            <img class="bot-type-logo" src="assets/img/rasa_bot_logo.png" />
                          </div>
                        </div>

                        <div class="bot-type-logo-wpr" *ngIf="faqkb.type === 'tilebot'">
                          <div class="bot-list-type-logo-img-wpr ">
                            <img class="bot-type-logo" [src]="botLogo" />
                          </div>
                        </div>

                        <div class="cl-card-img-wpr">

                          <img *ngIf="UPLOAD_ENGINE_IS_FIREBASE"
                            src="https://firebasestorage.googleapis.com/v0/b/{{storageBucket}}/o/profiles%2F{{faqkb?._id}}%2Fphoto.jpg?alt=media"
                            onerror="this.src='assets/img/avatar_bot_tiledesk.svg'" />

                          <img *ngIf="!UPLOAD_ENGINE_IS_FIREBASE" [src]="faqkb.botImage"
                            onerror="this.src='assets/img/avatar_bot_tiledesk.svg'" />

                        </div>

                        <div class="cl-card-info-wpr">
                          <span class="cl-card-item-name-wpr">

                           
                            <div class="cl-card-item-name" >
                           
                              <span *ngIf="botIdToRename !== faqkb._id">{{ faqkb.name }}</span>
                              <input *ngIf="botIdToRename === faqkb._id" type="text" [(ngModel)]="faqkb.name"
                                (ngModelChange)="changeChatBotName($event)"
                                (click)="$event.stopPropagation()"
                                (keypress)="onPressEnterUpdateChatBotName($event);$event.stopPropagation() ">
                            </div>
                          </span>
                          <div class="cl-card-item-description-wpr">
                            <!-- <div class="bot-card-bot-no-description" *ngIf="!faqkb.description"> No description provided</div> -->
                            <div class="cl-card-item-description" *ngIf="faqkb.description"> {{ faqkb?.description }}
                            </div>
                          </div>

                          <div class="cl-card-item-info">
              
                            {{'Created' | translate}} {{ faqkb?.createdAt | amTimeAgo}} / {{ "Updated" | translate }} {{
                            faqkb?.updatedAt | amTimeAgo }}

                          </div>

                        </div>
                      </div>
                     
                      <div class="cl-card-second-column">
                        <div class="cl-card-stats-wpr">

                          <div *ngIf="faqkb.type === 'tilebot'" class="cl-card-item-stats">
                            <div class="cl-card-item-stats-title">
                              <span *ngIf="faqkb.published"> Published </span>
                              <span *ngIf="!faqkb.published"> Draft </span>
                            </div>

                            <div class="cl-card-item-stats-values">
                              <span *ngIf="faqkb.published" class="material-icons bot-published-icon">
                                done
                              </span>

                              <span *ngIf="!faqkb.published" class="material-icons bot-unpublished-icon">
                                error_outline
                              </span>
                            </div>
                          </div>

                          <div *ngIf="isVisibleAnalytics" class="cl-card-item-stats">
                            <div class="cl-card-item-stats-title">
                              <!-- {{ "BotsAddEditPage.Messages" | translate }} -->
                              Messages
                            </div>
                            <div class="cl-card-item-stats-values">
                              {{ faqkb?.message_count}}
                            </div>
                          </div>

                         

                        </div>

                        <div class="cl-card-action-wpr">
                          <div class="cl-card-action-group">
                            <div *ngIf="isVisibleAnalytics" 
                              class="cl-card-action-btn-wpr">
                              <button id="btn-{{faqkb._id}}" 
                                mat-icon-button
                                (click)="$event.stopPropagation();openBotMsgsStats(faqkb)"
                                matTooltipClass="custom-mat-tooltip" 
                                matTooltip="Messages" 
                                #tooltip="matTooltip"
                                matTooltipPosition='below' 
                                matTooltipHideDelay="100">
                                <mat-icon>leaderboard</mat-icon>
                              </button>
                            </div>

                            <div class="cl-card-action-btn-wpr" 
                              (click)="$event.stopPropagation()">
                              <button id="share-btn-{{faqkb._id}}" 
                                  mat-icon-button 
                                  [matMenuTriggerFor]="menu"
                                  matTooltipClass="custom-mat-tooltip" 
                                  matTooltip="Share" 
                                  #tooltip="matTooltip"
                                  matTooltipPosition='below'
                                  matTooltipHideDelay="100">
                                <mat-icon>share</mat-icon>
                              </button>
                              <mat-menu #menu="matMenu">
                                <button class="mat-menu-btn" 
                                  mat-menu-item
                                  (click)='shareWithLink(faqkb._id, faqkb?.name)'>
                                  <mat-icon>link</mat-icon>
                                  <span>Share with link</span>
                                </button>

                                <button class="mat-menu-btn"
                                   mat-menu-item 
                                   (click)='exportChatbotToJSON(faqkb)'>
                                  <mat-icon>file_download</mat-icon>

                                  <span>Export</span>
                                </button>
                                <!-- <button *ngIf="!faqkb?.is_system_identity_bot" mat-menu-item 
                                (click)='openDeleteModal(faqkb?._id, faqkb?.name, faqkb?.has_faq, faqkb?.type)'>
                                <mat-icon>delete</mat-icon>
                                <span>{{ 'BotsPage.tooltipDeleteBot' | translate }}</span>
                              </button> -->
                              </mat-menu>
                            </div>

                            <div class="cl-card-action-btn-wpr" 
                              (click)="$event.stopPropagation()">
                              <button mat-icon-button 
                                  [matMenuTriggerFor]="sharemenu"
                                  matTooltipClass="custom-mat-tooltip" 
                                  matTooltip="Actions" 
                                  #tooltip="matTooltip"
                                  matTooltipPosition='below' 
                                  matTooltipHideDelay="100">
                                <mat-icon>more_vert</mat-icon>
                              </button>
                              <mat-menu #sharemenu="matMenu">

                                <!-- <button class="mat-menu-btn" 
                                  mat-menu-item 
                                  (click)='renameChatbot(faqkb)'>
                                  <mat-icon>edit</mat-icon>
                                  <span>Rename</span>
                                </button> -->

                                <button class="mat-menu-btn" 
                                  mat-menu-item
                                  (click)="openTestSiteInPopupWindow(faqkb?._id)">
                                  <mat-icon>visibility</mat-icon>
                                  <span>Test it out</span>
                                </button>

                                <button class="mat-menu-btn" 
                                  mat-menu-item
                                  (click)='duplicateChatbot(faqkb?._id,  faqkb?.name)'>
                                  <mat-icon>content_copy</mat-icon>
                                  <!-- <span>{{ 'Duplicate' | translate }}</span> -->
                                  <span>Duplicate</span>
                                </button>
                                <button class="mat-menu-btn" *ngIf="!faqkb?.is_system_identity_bot" 
                                  mat-menu-item
                                  (click)='openDeleteModal(faqkb?._id, faqkb?.name, faqkb?.has_faq, faqkb?.type)'>
                                  <mat-icon>delete</mat-icon>
                                  <!-- <span>{{ 'BotsPage.tooltipDeleteBot' | translate }}</span> -->
                                  <span>Delete</span>
                                </button>
                              </mat-menu>

                            </div>

                          </div>
                        </div>

                      </div>
                    </div>
                  </div>
                </div>
              </div>


              <!-- ./ New chatbot list -->


              <!-- style="overflow:visible;" -->
              <div style="display: none;" *ngIf="!showSpinner" class="card-content table-responsive">
                <table class="table table-hover">
                  <thead>
                    <tr>
                      <th></th>

                      <th>
                        <span class="column-th-span">
                          {{ "BotsPage.Name" | translate }}
                          <!-- Bot -->
                        </span>
                      </th>

                      <!-- <th>
                        <span class="column-th-span">
                          {{ "BotsAddEditPage.Type" | translate }}
                        </span>
                      </th> -->

                      <th *ngIf="isVisibleAnalytics" class="column-th-span">
                        {{ "BotsAddEditPage.Messages" | translate }}
                      </th>

                      <!-- <th style="">
                      <span style="color: #566787">
                        <strong>Id</strong>
                      </span>
                    </th> -->

                      <!-- <th>
                      <span style="color: #566787">
                        <strong>
                          {{ "BotsPage.RemoteId" | translate }} 
                        </strong>
                      </span> 
                    </th> -->

                      <!-- <th>
                      <span style="color: #566787">
                        <strong> Url</strong>
                      </span> 
                    </th> -->

                      <th>
                        <span class="column-th-span">

                          {{ "BotsPage.CreationDate" | translate }}

                        </span>
                      </th>

                      <th>
                        <span class="column-th-span">
                          <!-- {{ "BotsPage.Actions" | translate }} -->
                          {{ "Actions" | translate }}
                        </span>
                      </th>

                      <!-- <th colspan="2">
                      <span style="color: #566787">
                        <strong> 
                          FAQ 
                        </strong>
                      </span>  
                    </th> -->

                    </tr>
                  </thead>

                  <tbody>
                    <!-- IF THERE ISN'T BOT -->
                    <tr *ngIf="faqkbList && faqkbList?.length === 0" class="no-bot-tr-msg-wpr">
                      <td colspan="5" style="text-align: center; padding-top: 16px;">
                        <p class="no-bot-msg">
                          <!-- <i class="material-icons" style="vertical-align: middle; margin-bottom: 2px;color: #00bcd4;">
                            info
                          </i>
                          {{ 'BotsPage.NoBot' | translate }} -->

                          <span style="display: block;">
                            You don't have Chatbots.
                          </span>
                          <span style="display: block;">
                            Get you started with a <span class="btn---link" (click)="goToBotAllTemplates()"> chatbot
                              template </span> or create a new one from scratch
                          </span>
                          <span style="display: block;">
                            <!-- <span class="btn---link" (click)="createBlankTilebot()"> create a new one from scratch
                            </span> -->

                            <button class="btn btn-new btn-size-m btn--primary center" (click)="createBlankTilebot()"
                              style="margin-right: 20px; box-shadow: unset;">
                              Add from scratch
                            </button>
                          </span>
                        </p>
                      </td>
                    </tr>

                    <tr *ngFor="let faqkb of faqkbList; let i = index">
                      <!--  style="width: 1%; white-space: nowrap;" -->
                      <td style="white-space: nowrap; width: 1%; cursor: pointer;">
                        <span class="tool_tip" (click)='goToBotDtls(faqkb)'>
                          <img *ngIf="UPLOAD_ENGINE_IS_FIREBASE" class="bot--img"
                            src="https://firebasestorage.googleapis.com/v0/b/{{storageBucket}}/o/profiles%2F{{faqkb?._id}}%2Fphoto.jpg?alt=media"
                            onerror="this.src='assets/img/avatar_bot_tiledesk.svg'" />

                          <!-- <img *ngIf="!UPLOAD_ENGINE_IS_FIREBASE" class="bot--img"
                            src="{{baseUrl}}images?path=uploads%2Fusers%2F{{faqkb?._id}}%2Fimages%2Fthumbnails_200_200-photo.jpg"
                            onerror="this.src='assets/img/avatar_bot_tiledesk.svg'" /> -->

                          <img *ngIf="!UPLOAD_ENGINE_IS_FIREBASE" class="bot--img" [src]="faqkb.botImage"
                            onerror="this.src='assets/img/avatar_bot_tiledesk.svg'" />



                          <div class="bot-type-logo-wpr" *ngIf="faqkb.type === 'internal'">
                            <div class="bot-type-logo--img-wpr ">
                              <img class="bot-type-logo" src="assets/img/tiledesk_logo_no_text.png" />
                            </div>
                          </div>

                          <div class="bot-type-logo-wpr" *ngIf="faqkb.type === 'external'">
                            <div class="bot-type-logo--img-wpr ">
                              <img class="bot-type-logo" src="assets/img/external_bot_logo.png" />
                            </div>
                          </div>

                          <div class="bot-type-logo-wpr" *ngIf="faqkb.type === 'dialogflow'">
                            <div class="bot-type-logo--img-wpr ">
                              <img class="bot-type-logo" src="assets/img/Dialogflow_logo_no_text.png" />
                            </div>
                          </div>

                          <div class="bot-type-logo-wpr" *ngIf="faqkb.type === 'rasa'">
                            <div class="bot-type-logo--img-wpr ">
                              <img class="bot-type-logo" src="assets/img/rasa_bot_logo.png" />
                            </div>
                          </div>

                          <!-- <span class="bot-type-logo-wpr" *ngIf="faqkb.type === 'tilebot'">
                            <img src="assets/img/tilebot_logo_small.png" />
                          </span> -->

                          <div class="bot-type-logo-wpr" *ngIf="faqkb.type === 'tilebot'">
                            <div class="bot-type-logo--img-wpr ">
                              <img class="bot-type-logo" [src]="botLogo" />
                            </div>
                          </div>



                          <!-- <span class="bot-type-logo-wpr"   *ngIf="faqkb.type === 'tiledesk-ai'">
                            <img src="assets/img/tiledesk-ai-logo.png" />
                          </span> -->



                          <!-- <span class="tooltiptext">
                            {{ 'BotsPage.BotId' | translate }}: <br> {{ faqkb?._id  }}
                           </span> -->

                          <!-- <div class="right" style="padding: 2px 9px;min-width: fit-content;">
                            <h4>{{ 'BotsPage.BotId' | translate }}</h4>

                            {{ faqkb?._id }}
                            <i></i>
                          </div> -->

                        </span>


                        <!-- <span *ngIf="!faqkb?.external"
                      style="font-weight:400; font-size:12px; display:block; color:#7695a5; margin-top: 4px;">
                      # FAQs:
                      <span *ngIf="!faqkb?.has_faq">
                        0
                        <span style="position: relative; top: -2px;" class="tooltipx">
                          <i class="material-icons"
                            style="vertical-align: middle; color:#ec971f; font-size: 12px; padding-left: 8px">
                            report_problem
                          </i>
                          <span class="tooltiptext">
                     
                            <span style="vertical-align: middle;font-size: 12px;">
                              {{ 'BotsPage.PendingAddFaqs' | translate }}
                            </span>
                          </span>
                        </span>
                      </span>
                      <span *ngIf="faqkb?.has_faq">
                        {{ faqkb?.faqs_number }}
                      </span>
                    </span> -->

                        <!-- <span *ngIf="faqkb?.external"
                      style="font-weight:400; font-size:12px; display:block; color:#7695a5; margin-top: 4px;">

                      <span [ngClass]="{'url-top-position' : faqkb?.url }"> Url: </span>
                      <span *ngIf="faqkb?.url" [ngClass]="{'truncate' : i !== rowIndexSelected }"
                        style="max-width: 250px;color: #03a5e8; cursor:pointer; display:inline-block; word-break: break-all;"
                        (click)="$event.stopPropagation(); goToBotExternalUrl(faqkb?.url)">
                        {{ faqkb?.url}}
                      </span>
                      <span *ngIf="faqkb?.url?.length > 43">
                        <i *ngIf="i !== rowIndexSelected" class="material-icons"
                          style="cursor: pointer; color: #039be5; font-size:18px;"
                          (click)="$event.stopPropagation(); disableTruncateText(i)">
                          keyboard_arrow_down
                        </i>
                        <i *ngIf="i === rowIndexSelected" class="material-icons"
                          style="cursor: pointer; color: #039be5; font-size:18px;"
                          (click)="$event.stopPropagation(); enableTruncateText()">
                          keyboard_arrow_up
                        </i>
                      </span>

                      <span *ngIf="!faqkb?.url">
                        n.d.
                        <span style="position: relative; top: -2px;" class="tooltipx">
                          <i class="material-icons"
                            style="vertical-align: middle; color:#ec971f; font-size: 12px; padding-left: 8px">
                            report_problem
                          </i>
                          <span class="tooltiptext">
                            <span style="vertical-align: middle;font-size: 12px;">
                              {{ "BotsPage.NoUrlProvided" | translate }}
                            </span>
                          </span>
                        </span>
                      </span>
                    </span> -->
                      </td>


                      <!-- ----------------------------------------------------- -->
                      <!-- Bot name & truncated description -->
                      <!-- ----------------------------------------------------- -->
                      <td (click)='goToBotDtls(faqkb)' style="cursor: pointer;">
                        <span style="font-weight:400; cursor: pointer;font-size:13px">
                          {{ faqkb?.name }}
                        </span>

                        <div *ngIf="faqkb?.description" class="bot_description_wpr">

                          <div class="bot--truncated--desc"> {{ faqkb?.truncated_desc}} </div>
                          <div class="bot--full--desc"> {{ faqkb?.description}} </div>
                        </div>
                      </td>

                      <!-- <td>
                        <span *ngIf="faqkb?.type !== 'internal'" style="text-transform: capitalize;font-weight:400;">
                          {{ faqkb?.type}}
                        </span>
                        <span *ngIf="faqkb?.type === 'internal'" style="text-transform: capitalize;font-weight:400;">
                          resolution
                        </span>
                      </td> -->

                      <td *ngIf="isVisibleAnalytics"
                        style="text-transform: capitalize;font-weight:400;text-align: center">
                        <span style="text-transform: capitalize;font-weight:400;"> {{ faqkb?.message_count}} </span>
                      </td>

                      <td>
                        <!-- {{ faqkb?.createdAt | date: 'd/M/y'}} -->
                        {{ faqkb?.createdAt | amDateFormat: 'LLL'}}

                      </td>

                      <td class="td-actions text-right" style="padding-top:18px !important">
                        <!-- rel="tooltip" title="{{ 'BotsPage.tooltipEditBot' | translate }}" -->
                        <button type="button" class="btn btn-primary btn-simple btn-xs" (click)='goToBotDtls(faqkb)'
                          matTooltipClass="custom-mat-tooltip" matTooltip="{{ 'BotsPage.tooltipEditBot' | translate }}"
                          #tooltip="matTooltip" matTooltipPosition='below' matTooltipHideDelay="100">
                          <i class="material-icons">edit</i>
                        </button>

                        <!-- rel="tooltip" title="{{ 'Duplicate' | translate }}" -->
                        <button type="button" class="btn btn-primary btn-simple btn-xs"
                          (click)='duplicateChatbot(faqkb?._id,  faqkb?.name)' matTooltipClass="custom-mat-tooltip"
                          matTooltip="{{ 'Duplicate' | translate }}" #tooltip="matTooltip" matTooltipPosition='below'
                          matTooltipHideDelay="100">
                          <i class="material-icons">content_copy</i>
                        </button>


                        <!-- <button *ngIf="faqkb?.type === 'tilebot' && isPanelRoute === false" type="button" rel="tooltip" title="{{ 'BotsPage.tooltipEditBot' | translate }}"
                        class="btn btn-primary btn-simple btn-xs" (click)='goToCDS(faqkb?._id, faqkb?.type,  faqkb?.name)'>
                        <i class="material-icons" style="color: rgb(0, 0, 0);">rocket_launch</i>
                      </button> -->
                        <!-- rel="tooltip"title="{{ 'BotsPage.tooltipDeleteBot' | translate }}" -->
                        <button *ngIf="!faqkb?.is_system_identity_bot" type="button"
                          class="btn btn-danger btn-simple btn-xs"
                          (click)='openDeleteModal(faqkb?._id, faqkb?.name, faqkb?.has_faq, faqkb?.type)'
                          matTooltipClass="custom-mat-tooltip"
                          matTooltip="{{ 'BotsPage.tooltipDeleteBot' | translate }}" #tooltip="matTooltip"
                          matTooltipPosition='below' matTooltipHideDelay="100">
                          <i class="material-icons">close</i>
                        </button>
                      </td>

                    </tr>
                  </tbody>
                </table>

              </div>
            </div>
          </div>
          <!-- /. end col-md-12 -->



        </div>
      </div>
      <!-- </div> -->
    </div>
  </div>
</div>

<!-- --------------------------------------------- -->
<!-- MODAL WINDOW  -->
<!-- --------------------------------------------- -->

<!-- --------------------------------- -->
<!-- NEW DELETE BOT MODAL WINDOW  -->
<!-- --------------------------------- -->
<div class="modal" tabindex="-1" role="dialog" [ngStyle]="{'display':displayDeleteBotModal}"
  style="background-color: rgba(90,90,90,0.5);">
  <div class="modal-dialog" role="document">
    <div class="modal-content" style="border-radius: 6px;">
      <div class="modal-header">
        <button type="button" class="close" aria-label="Close" (click)="onCloseDeleteBotModal()">
          <span aria-hidden="true" style="color: #fff">&times;</span>
        </button>
        <h4 class="modal-title" style="color: #fff">
          <i class="material-icons" style="vertical-align: middle">
            report_problem
          </i>
          <span style="vertical-align: middle; padding-left:8px">
            <!-- Elimina bot -->
            {{ "BotsPage.DeleteBot" | translate }}
          </span>
        </h4>
        <h4 class="modal-title" style="color: #fff; padding-top:10px; font-size: 1.1em ">
          {{ "BotsPage.TheBotWithID" | translate }}
          <code>{{ id_toDelete }}</code>
          <!-- BOT NAME -->
          <!-- <span style="font-weight: 400;"> 
                  “{{ bot_name_to_delete}}”
                </span> -->
          {{ "BotsPage.WillBeDeleted" | translate }}
        </h4>
      </div>
      <div class="modal-body">
        <p style="font-weight: 400; color: rgba(0,0,0,0.87)">
          {{ "BotsPage.IfYouDeletedTheBot" | translate }}

          <strong> “{{ bot_name_to_delete}}”</strong>,

          {{ "BotsPage.YouAlsoDeleteItsFaqs" | translate }}
        </p>

        <label style="font-weight:400; text-align: left; padding-top:16px; font-size: 14px; color: rgba(0,0,0,0.54) "
          class="col-sm-10 ">
          {{ "BotsPage.ToDeleteTheBotType" | translate }}
          <span style="color:#212121">
            <strong> {{id_toDelete}}</strong>
          </span>
        </label>
        <div class="col-sm-10">
          <input [(ngModel)]="bot_id_typed" (input)="checkIdBotTyped()" class="" type="text" placeholder="ID bot">
        </div>
      </div>
      <!-- margin-top: 75px; -->
      <div class="modal-footer">
        <button class="btn btn-white" (click)="onCloseDeleteBotModal()" style="padding:12px 16px;">
          <!-- {{ "BotsPage.Cancel" | translate }} -->
          {{ "Cancel" | translate }}
        </button>
        <button style="margin-top:0px" class="btn btn-danger" [disabled]="!ID_BOT_TYPED_MATCHES_THE_BOT_ID"
          (click)="trashTheBot()">
          <!-- Elimina bot -->
          {{ "BotsPage.DeleteBot" | translate }}
        </button>
      </div>
    </div>
  </div>
</div>