<span class="navbar-brand navbar-brand-sidebar-settings"
    [ngStyle]="{'margin-top':isChromeVerGreaterThan100 === true ? '-64px' : '6px' }"
    [ngClass]="{'is_opened':IS_OPEN_SETTINGS_SIDEBAR, 'is_closed':!IS_OPEN_SETTINGS_SIDEBAR }">

    <div class="chatbot-svg-icon">
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
            x="0px" y="0px" viewBox="0 0 24 24" style="enable-background:new 0 0 24 24;" xml:space="preserve"
            height="29px" width="29px">
            <style type="text/css">
                .st0 {
                    fill: #3C4858
                }
            </style>
            <path class="st0" d="M12,21.9c-1,0-1.8-0.3-2.5-1c-0.7-0.7-1-1.5-1-2.5c0-0.8,0.3-1.6,0.8-2.2c0.5-0.6,1.2-1,1.9-1.2v-2.3H5.5V9H3
            V2.5h6.4V9H7v2.3h10V8.9c-0.8-0.2-1.4-0.6-1.9-1.2c-0.5-0.6-0.8-1.3-0.8-2.2c0-1,0.3-1.8,1-2.5c0.7-0.7,1.5-1,2.5-1
            c1,0,1.8,0.3,2.5,1c0.7,0.7,1,1.5,1,2.5c0,0.8-0.3,1.6-0.8,2.2c-0.5,0.6-1.2,1-1.9,1.2v3.9h-5.7v2.3c0.8,0.2,1.4,0.6,1.9,1.2
            c0.5,0.6,0.8,1.3,0.8,2.2c0,1-0.3,1.8-1,2.5C13.8,21.6,13,21.9,12,21.9z M17.8,7.5c0.5,0,1-0.2,1.4-0.6c0.4-0.4,0.6-0.8,0.6-1.4
            c0-0.5-0.2-1-0.6-1.4c-0.4-0.4-0.8-0.6-1.4-0.6c-0.5,0-1,0.2-1.4,0.6C16,4.5,15.8,5,15.8,5.5c0,0.5,0.2,1,0.6,1.4S17.2,7.5,17.8,7.5
            z M4.5,7.5H8V4H4.5C4.5,4,4.5,7.5,4.5,7.5z M12,20.4c0.5,0,1-0.2,1.4-0.6S14,19,14,18.5s-0.2-1-0.6-1.4c-0.4-0.4-0.8-0.6-1.4-0.6
            c-0.5,0-1,0.2-1.4,0.6S10,17.9,10,18.5s0.2,1,0.6,1.4C11,20.2,11.5,20.4,12,20.4z" />
        </svg>

    </div>

    <span class="chatbot-sidebar-title" *ngIf="IS_OPEN_SETTINGS_SIDEBAR">
        {{'Flows' | translate }}
    </span>

</span>

<div class="main-content" style="padding-top:0px; padding-left: 5px;padding-right: 5px;">

    <div class="page-title--sidebar-settings"
        [ngClass]="{'page-title--sidebar-settings_opened':IS_OPEN_SETTINGS_SIDEBAR, 'page-title--sidebar-settings_closed':!IS_OPEN_SETTINGS_SIDEBAR }">

        <div class="top-header-wpr" style="display: flex;">
            <div class="top-header-back-icon-wpr" (click)="goBack()">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px">
                    <path d="M560-240 320-480l240-240 56 56-184 184 184 184-56 56Z" />
                </svg>
            </div>
            <div class="top-header-page-name-wpr">
                Webhook Logs
            </div>

        </div>

    </div>

    <div class="container-fluid" style="padding-left: 5px;padding-right: 5px;">
        <div class="content-wpr" style="display: flex;">

            <appdashboard-bots-sidebar [allTemplatesCount]="allTemplatesCount"
                [allCommunityTemplatesCount]="allCommunityTemplatesCount"
                [customerSatisfactionTemplatesCount]="customerSatisfactionTemplatesCount"
                [increaseSalesTemplatesCount]="increaseSalesTemplatesCount" [chatBotCount]="chatBotCount"
                [myChatbotOtherCount]="myChatbotOtherCount" [automationsCount]="automationsCount"
                [flowWebhooksCount]="flowWebhooksCount" [customerSatisfactionBotsCount]="customerSatisfactionBotsCount"
                [increaseSalesBotsCount]="increaseSalesBotsCount">
            </appdashboard-bots-sidebar>

            <div class="teplate-content" style="flex: 1 1 auto; margin-left: 15px; ">

                <div class="row">
                    <div class="col-xs-12">

                        <div class="card card--no-border" style="margin-top: 5px;">

                            <!-- <loading-spinner *ngIf="showSpinner"></loading-spinner> -->
                            <!-- *ngIf="!showSpinner" -->
                            <div class="main--wrapper">

                                <div class="flow-webhook-detail" style="display: flex;
                                        justify-content: space-between;
                                        align-items: center;">
                                    <div class="flow-webhook-detail-left">
                                        <div class="flow-webhook-header">
                                            <div class="flow-webhook-name">
                                                {{currentWH?.name }}
                                            </div>
                                        </div>

                                        <div class="flow-webhook-meta-wpr">
                                            <div class="flow-webhook-meta" style="margin-top: 6px;">
                                                <div class="flow-webhook-url-wpr">
                                                    <!-- <div class="wh-label" style="font-weight: 400;"> Webhook URL </div>    -->

                                                    <!-- <div class="flow-webhook-url">
                                                        <span #copyText>
                                                            {{webhookURL}}
                                                        </span>
                                                    </div>

                                                    <div class="copy-container" (click)="copyToClipboard(copyText.nativeElement)">
                                                        <span>
                                                            <svg xmlns="http://www.w3.org/2000/svg" height="14px"
                                                                viewBox="0 0 24 24" width="14px" fill="#3ea9f5" style="cursor: pointer;">
                                                                <path d="M0 0h24v24H0V0z" fill="none" />
                                                                <path
                                                                    d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" />
                                                            </svg>
                                                        </span>
                                                        <span class="copy--tooltip" *ngIf="copied">
                                                            <span> {{'Copied' | translate}}!</span>
                                                        </span>
                                                    </div> -->

                                                    <div class="flow-webhook-url">
                                                        <span id="webhook-text">{{ webhookURL }}</span>
                                                    </div>

                                                    <!-- Copy Icon -->
                                                    <div class="copy-container" (click)="copyToClipboard($event)">
                                                        <span>
                                                            <svg xmlns="http://www.w3.org/2000/svg" height="14px"
                                                                viewBox="0 0 24 24" width="14px" fill="#3ea9f5"
                                                                style="cursor: pointer;">
                                                                <path d="M0 0h24v24H0V0z" fill="none" />
                                                                <path
                                                                    d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" />
                                                            </svg>

                                                            <span class="copy--tooltip" *ngIf="copied">{{'Copied' |
                                                                translate}}!</span>
                                                        </span>
                                                    </div>


                                                    <!-- <div class="copy-wrapper">
                                                        <input #copyInput type="text" [value]="webhookURL" readonly />
                                                      
                                                        <button
                                                          mat-icon-button
                                                          (click)="copyToClipboard(copyInput.value)"
                                                          matTooltip="{{'Copied' | translate}}!"
                                                          matTooltipPosition="above"
                                                          [matTooltipDisabled]="true"
                                                          #tooltip="matTooltip">
                                                          <mat-icon>content_copy</mat-icon>
                                                        </button>
                                                      </div> -->

                                                </div>
                                                <!-- 
                                                <div class="flow-webhook-status">
                                                    Status
                                                    <span *ngIf="currentWH?.enabled === false">
                                                        Inactive
                                                    </span>
                                                    <span *ngIf="currentWH?.enabled === true">
                                                        Active
                                                    </span>

                                                </div> -->

                                            </div>

                                        </div>
                                    </div>
                                    <div class="flow-webhook-detail-right">
                                        <div class="wh-onoffswitch">
                                            <input type="checkbox" name="onoffswitch" class="wh-onoffswitch-checkbox"
                                                id="whonoffswitch" tabindex="0" [checked]="currentWH?.enabled"
                                                (change)="webhookOnOff($event, currentWH?.webhook_id)">
                                            <label class="wh-onoffswitch-label" for="whonoffswitch">
                                                <span class="wh-onoffswitch-inner"></span>
                                                <span class="wh-onoffswitch-switch"></span>
                                            </label>
                                        </div>

                                        <div class="wh-btn-delete-wpr">

                                            <button class="btn btn-round-red delete-flow-wh"
                                                (click)="$event.stopPropagation();deleteWebhook(currentWH?.webhook_id)">
                                                <span>
                                                    <svg xmlns="http://www.w3.org/2000/svg" height="22px"
                                                        viewBox="0 -960 960 960" width="22px" fill="none">
                                                        <path
                                                            d="m376-300 104-104 104 104 56-56-104-104 104-104-56-56-104 104-104-104-56 56 104 104-104 104 56 56Zm-96 180q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520Zm-400 0v520-520Z">
                                                        </path>
                                                    </svg>
                                                </span>
                                            </button>
                                        </div>
                                    </div>



                                </div>


                                <!-- <div class="flow-webhook-log" style="padding: 0 10px;margin-top: 30px;">
                                    <div class="flow-webhook-log-header" style="width: 100%;
                                    height: 30px;
                                    background-color: #e5eaf5;
                                    border: 1px solid #dfe3ed;
                                   
                                  
                                    position: relative;
                                    font-size: 12px;
                                    padding: 0 20px;
                                    font-weight: 500;">
                                         
                                    </div>

                                    <div *ngFor="let log of listOfLogs; let i = index;" class="row-log" [class.closed]="!log.open">
                                        <span [id]="'row-log-button_'+i" class="row-log-button material-icons-outlined" [class.open]="log.open" (click)="onToggleRowLog(i)">chevron_right</span>
                                        <span class="row-log-time">{{log.rows?.timestamp | date: 'dd/MM/yyyy HH:mm:ss'}} </span>
                                        <span class="row-log-level" [ngClass]="log.rows?.level">{{log.rows?.level}}</span>
                                        <span [id]="'row-log-text_'+i" class="row-log-text">{{log.rows?.text}}</span>
                                    </div>


                                </div> -->
                                <!-- [class.closed]="isClosed" -->

                                <!-- ------------------------------------------------------------ -->
                                <!-- Logs -->
                                <!-- ------------------------------------------------------------ -->
                                <div class="logs-section" style="padding: 0px 12px; margin-top: 40px;">
                                    <div class="logs-filter-wrapper">
                                        <div class="logs-filters-left">
                                            <div class="logs-filter-label-wpr">
                                                <!-- <div class="filter-type-icon" style="height: 24px;"> 
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                        viewBox="0 0 24 24" fill=" #d3dbe5">
                                                        <path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"></path>
                                                        <path d="M0 0h24v24H0z" fill="none"></path>
                                                    </svg>
                                                </div> -->
                                                <div class="logs-label">
                                                    Logs
                                                    <!-- that match -->
                                                </div>
                                            </div>

                                        </div>
                                        <div class="chevron">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="66" height="35"
                                                viewBox="0 0 66 66" preserveAspectRatio="none" style="height: 100%;">
                                                <polygon class="a" points="29 66 28 66 38 33 28 0 29 0 39 33 29 66"
                                                    fill="#e6e9ed">
                                                </polygon>
                                            </svg>
                                        </div>
                                        <div class="logs-filters-right">
                                            <div class="logs-label">
                                                Level:
                                            </div>
                                            <span>
                                                {{selectedLogLevel}}
                                            </span>

                                            <button mat-icon-button [matMenuTriggerFor]="logLevelMenu"
                                                #menuTrigger="matMenuTrigger">
                                                <mat-icon>arrow_drop_down</mat-icon>
                                            </button>

                                            <mat-menu #logLevelMenu="matMenu" [overlapTrigger]="false"
                                                class="mat-menu-with-ng-select">
                                                <div class="mat-menu-title">
                                                    Log level filter
                                                </div>

                                                <div class="menu-ng-select-wrapper" (click)="$event.stopPropagation()">
                                                    <ng-select [items]="logLevels" bindLabel="label" bindValue="value"
                                                        [(ngModel)]="selectedLogLevel"
                                                        (change)="onLogLevelChange($event, menuTrigger)"
                                                        [searchable]="false" [clearable]="false"
                                                        class="loglevel-ng-select" appendTo="body">
                                                    </ng-select>
                                                </div>
                                            </mat-menu>

                                        </div>

                                    </div>





                                    <!-- <div class="logs-header" style="display: flex ;
                                        flex-direction: row;
                                        align-items: center;
                                        border-bottom: 1px solid #e2e8ef;margin-bottom: 5px;">

                                        <div class="logs-header-name">
                                            Logs that match
                                        </div>
                                        <div class="logs-header-select">

                                            <button mat-icon-button [matMenuTriggerFor]="logLevelMenu"
                                                #menuTrigger="matMenuTrigger">
                                                <mat-icon>arrow_drop_down</mat-icon>
                                            </button>

                                            <mat-menu #logLevelMenu="matMenu" [overlapTrigger]="false"
                                                class="mat-menu-with-ng-select">
                                                <div style="padding: 0px 16px;font-weight: 400;">
                                                    Log level filter
                                                </div>

                                                <div class="menu-ng-select-wrapper" (click)="$event.stopPropagation()">
                                                    <ng-select [items]="logLevels" bindLabel="label" bindValue="value"
                                                        [(ngModel)]="selectedLogLevel"
                                                        (change)="onLogLevelChange($event, menuTrigger)"
                                                        [searchable]="false" [clearable]="false"
                                                        class="loglevel-ng-select" appendTo="body">
                                                    </ng-select>
                                                </div>
                                            </mat-menu>

                                        </div>
                                        <div class="seleted-log-level">
                                            {{ selectedLogLevel }} level
                                        </div>

                                    </div> -->

                                    <div id="cds_widget_log" class="cds-widget-log-container">
                                        <!-- (mousedown)="initResize($event)" -->
                                        <!-- <div class="resize-handle">
                                            <div class="dropdown-container">
                                                <label for="logLevel">
                                                    Logs
                                                </label>
                                            </div>
                                        </div> -->
                                        <div class="content-log" (wheel)="onWheel($event)">
                                            <!-- <div *ngIf="loadingPrev" class="row-log-loading">
                                                <div class="loading-loader"></div>
                                                <span class="loading-label">
                                                
                                                    Loading before
                                                    <span *ngIf="listOfLogs?.length">
                                                        {{listOfLogs[0]?.rows?.timestamp | date: 'dd/MM/yyyy HH:mm:ss'}}

                                                    </span>
                                                </span>
                                        
                                            </div> -->
                                            <div *ngFor="let log of listOfLogs; let i = index;" class="row-log"
                                                [class.closed]="!log.open">
                                                <span [id]="'row-log-button_'+i"
                                                    class="row-log-button material-icons-outlined"
                                                    [class.open]="log.open"
                                                    (click)="onToggleRowLog(i)">chevron_right</span>
                                                <span class="row-log-time">
                                                    {{log.rows?.timestamp | date: 'dd/MM/yyyy HH:mm:ss'}}
                                                </span>
                                                <span class="row-log-level" [ngClass]="log.rows?.level">
                                                    {{log.rows?.level}}
                                                </span>
                                                <span [id]="'row-log-text_'+i" class="row-log-text">
                                                    {{log.rows?.text}}
                                                </span>
                                            </div>
                                            <div *ngIf="loadingNext" class="row-log-loading">
                                                <div class="loading-loader"></div>
                                                <span class="loading-label">
                                                    <!-- {{ 'CDSCanvas.LoadingAfter' | translate }}  -->
                                                    Loading after
                                                    <span *ngIf="listOfLogs?.length">
                                                        {{listOfLogs[listOfLogs.length - 1]?.rows?.timestamp | date:
                                                        'dd/MM/yyyy HH:mm:ss'}}
                                                    </span>
                                                </span>
                                                <!-- <div class="dot"></div>
                                                <div class="dot"></div>
                                                <div class="dot"></div> -->
                                            </div>

                                        </div>
                                    </div>

                                    <!-- ---------------------------------- -->
                                    <!-- Test as bt -->
                                    <!-- ---------------------------------- -->
                                    <div id="cds_widget_log" class="cds-widget-log-container">
                                        <!-- (mousedown)="initResize($event)" -->
                                        <!-- <div class="resize-handle">
                                            <div class="dropdown-container">
                                                <label for="logLevel">
                                                    Logs
                                                </label>
                                            </div>
                                        </div> -->
                                        <div class="content-log" (wheel)="onWheel($event)">
                                            <!-- <div *ngIf="loadingPrev" class="row-log-loading">
                                                <div class="loading-loader"></div>
                                                <span class="loading-label">
                                                
                                                    Loading before
                                                    <span *ngIf="listOfLogs?.length">
                                                        {{listOfLogs[0]?.rows?.timestamp | date: 'dd/MM/yyyy HH:mm:ss'}}

                                                    </span>
                                                </span>
                                        
                                            </div> -->
                                            
                                          

                                            <div class="log--row" *ngFor="let log of listOfLogs; let i = index;"  (click)="onToggleLog(i)">
                                                <div class="log--col-time"> {{log.rows?.timestamp | date: 'dd/MM/yyyy HH:mm:ss'}}</div>
                                            
                                                <div class="log--col-level" [ngClass]="log.rows?.level"> {{log.rows?.level}}</div>
                                               
                                                <div [id]="'log--col-message_'+i" class="log--col-message" [class.expanded]="expandedLogs.has(i)">
                                                    {{log.rows?.text}}
                                                </div>
                                            </div>
                                            <div *ngIf="loadingNext" class="row-log-loading">
                                                <div class="loading-loader"></div>
                                                <span class="loading-label">
                                                    <!-- {{ 'CDSCanvas.LoadingAfter' | translate }}  -->
                                                    Loading after
                                                    <span *ngIf="listOfLogs?.length">
                                                        {{listOfLogs[listOfLogs.length - 1]?.rows?.timestamp | date:
                                                        'dd/MM/yyyy HH:mm:ss'}}
                                                    </span>
                                                </span>
                                    
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- <div *ngIf="flowWebhooks && flowWebhooks?.length === 0" class="no-bot-tr-msg-wpr">

                                <p class="no-bot-msg">
                                    <span style="display: block;max-width: 600px;margin: auto;">
                                   
                                        {{'YouDoNotHaveWebhooks' | translate}}.
                                    </span>
                                </p>
                            </div> -->

                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>