<!-- <span class="navbar-brand navbar-brand-sidebar-settings"
  [ngStyle]="{'margin-top':isChromeVerGreaterThan100 === true ? '-64px' : '6px' }"
  [ngClass]="{'is_opened':IS_OPEN_SETTINGS_SIDEBAR, 'is_closed':!IS_OPEN_SETTINGS_SIDEBAR }">

  <div class="chatbot-svg-icon">
    <svg version="1.1" id="Objects" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
      x="0px" y="0px" viewBox="0 0 30 30" style="enable-background:new 0 0 30 30; width: 29px;height: 29px;"
      xml:space="preserve">
      <style type="text/css">
        .cb--0 {
          fill: #3C4858;
        }
      </style>
      <g>
        <path class="cb--0" d="M24.6,12.6c-0.1,0-0.2,0-0.3,0c-1.6-2.9-4.5-5.8-9.2-5.8s-7.6,2.9-9.2,5.8c-0.2,0-0.4-0.1-0.6-0.1
            c-2,0-3.5,2.3-3.5,5c0,2.8,1.6,5,3.5,5c0.1,0,0.3,0,0.4,0c2.3,3.6,7,3.9,9.4,3.9c2.3,0,6.9-0.5,9.2-3.9c0.1,0,0.1,0,0.2,0
            c2,0,3.5-2.3,3.5-5C28.1,14.8,26.6,12.6,24.6,12.6z M22,21.1c0,0-7.8,2.3-14.3-0.1c0,0-0.8-4.1-0.5-7.2c0,0,8.1-3.2,15.6,0.3
            C22.8,14.1,23.3,19.1,22,21.1z" />
        <ellipse class="cb--0" cx="11.9" cy="17.4" rx="0.7" ry="1.4" />
        <ellipse class="cb--0" cx="18.1" cy="17.4" rx="0.7" ry="1.4" />
        <path class="cb--0" d="M14.5,5.3v1.1h1V5.3C15.8,5.1,16,4.8,16,4.5c0-0.5-0.4-0.9-1-0.9c-0.5,0-0.9,0.4-0.9,0.9
            C14.1,4.8,14.2,5.1,14.5,5.3z" />
      </g>
    </svg>

  </div>

  <span class="chatbot-sidebar-title" *ngIf="IS_OPEN_SETTINGS_SIDEBAR">Chatbots </span>

</span> -->

<p style="z-index: 1050;position: relative;  padding-left:30px" class="navbar-brand"
  [ngStyle]="{'margin-top':isChromeVerGreaterThan100 === true ? '-64px' : '6px' }">
  {{ 'KnowledgeBases' | translate }}
</p>


<div class="main-content" style="padding-top:0px; padding-left: 5px;padding-right: 5px;">

  <!-- <div class="page-title--sidebar-settings"
    [ngClass]="{'page-title--sidebar-settings_opened':IS_OPEN_SETTINGS_SIDEBAR, 'page-title--sidebar-settings_closed':!IS_OPEN_SETTINGS_SIDEBAR }">
    Manage your Knowledge Bases
  </div> -->
  <div class="container-fluid" style="padding-left: 5px;padding-right: 5px;">

    <!-- <div class="content-wpr" style="display: flex;"> -->

    <!-- <appdashboard-settings-sidebar *ngIf="!ARE_NEW_KB"> </appdashboard-settings-sidebar>

      <appdashboard-bots-sidebar *ngIf="ARE_NEW_KB" [allTemplatesCount]="allTemplatesCount"
        [allCommunityTemplatesCount]="allCommunityTemplatesCount"
        [customerSatisfactionTemplatesCount]="customerSatisfactionTemplatesCount"
        [increaseSalesTemplatesCount]="increaseSalesTemplatesCount" [myChatbotOtherCount]="myChatbotOtherCount"
        [customerSatisfactionBotsCount]="customerSatisfactionBotsCount"
        [increaseSalesBotsCount]="increaseSalesBotsCount" [kbCount]="kbCount">
      </appdashboard-bots-sidebar> -->


    <div class="kb-content">
      <!-- <appdashboard-knowledge-bases-alert [kbsListCount]="kbsListCount" *ngIf="kbsListCount && kbsListCount > kbLimit"> </appdashboard-knowledge-bases-alert> -->


      <div class="kb-container-wpr">

        <!-- <div *ngIf="hideHelpLink" class="widget-set-up-link-to-docs-wpr">
            <span>
              <svg style="width: 25px;height:auto; vertical-align: middle;" aria-hidden="true" focusable="false"
                data-prefix="fab" data-icon="readme" class="svg-inline--fa fa-readme fa-w-18" role="img"
                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
                <path fill="#0f62ff"
                  d="M528.3 46.5H388.5c-48.1 0-89.9 33.3-100.4 80.3-10.6-47-52.3-80.3-100.4-80.3H48c-26.5 0-48 21.5-48 48v245.8c0 26.5 21.5 48 48 48h89.7c102.2 0 132.7 24.4 147.3 75 .7 2.8 5.2 2.8 6 0 14.7-50.6 45.2-75 147.3-75H528c26.5 0 48-21.5 48-48V94.6c0-26.4-21.3-47.9-47.7-48.1zM242 311.9c0 1.9-1.5 3.5-3.5 3.5H78.2c-1.9 0-3.5-1.5-3.5-3.5V289c0-1.9 1.5-3.5 3.5-3.5h160.4c1.9 0 3.5 1.5 3.5 3.5v22.9zm0-60.9c0 1.9-1.5 3.5-3.5 3.5H78.2c-1.9 0-3.5-1.5-3.5-3.5v-22.9c0-1.9 1.5-3.5 3.5-3.5h160.4c1.9 0 3.5 1.5 3.5 3.5V251zm0-60.9c0 1.9-1.5 3.5-3.5 3.5H78.2c-1.9 0-3.5-1.5-3.5-3.5v-22.9c0-1.9 1.5-3.5 3.5-3.5h160.4c1.9 0 3.5 1.5 3.5 3.5v22.9zm259.3 121.7c0 1.9-1.5 3.5-3.5 3.5H337.5c-1.9 0-3.5-1.5-3.5-3.5v-22.9c0-1.9 1.5-3.5 3.5-3.5h160.4c1.9 0 3.5 1.5 3.5 3.5v22.9zm0-60.9c0 1.9-1.5 3.5-3.5 3.5H337.5c-1.9 0-3.5-1.5-3.5-3.5V228c0-1.9 1.5-3.5 3.5-3.5h160.4c1.9 0 3.5 1.5 3.5 3.5v22.9zm0-60.9c0 1.9-1.5 3.5-3.5 3.5H337.5c-1.9 0-3.5-1.5-3.5-3.5v-22.8c0-1.9 1.5-3.5 3.5-3.5h160.4c1.9 0 3.5 1.5 3.5 3.5V190z">
                </path>
              </svg>
            </span>
          
            <span class="widget-set-up-link-to-docs" (click)="goToKbDoc()">
              {{'KbPage.LearnMoreAboutKB' | translate}}
            </span>
          </div> -->

        <div class="kb-content-container">
          <loading-spinner *ngIf="showSpinner"></loading-spinner>

          <div class="card-content" *ngIf="!showSpinner">

            <div class="header">
              <!-- <p class="header-title">{{ 'KbPage.AllContents' | translate }}</p> -->

              <div style="display: flex; flex-direction: column;">
                <!-- <div style="display: flex; flex-direction: row; align-items: center;">
                    <div class="selected-namespace-label" style="font-size: 14px; margin-right: 4px;">Knowledge Base</div>
                    <div *ngIf="selectedNamespace.default" class="default-badge" style="background-color: #677693ab; color: white; padding: 0px 4px; border-radius: 6px; font-size: 12px; font-weight: 400;">Default</div>
                  </div> -->
                <div class="selected-namespace-content">
                  <div id="selected-namespace-name" class="selected-namespace-name" (mouseover)="onMouseOver()"
                    (mouseout)="onMouseOut()">
                    <div *ngIf="!namespaceIsEditable" id="namespace-name-output" class="namespace-name-output"
                      style="padding: 0px;" (click)="hasClickedNamespaceName()" matTooltipClass="kb-custom-mat-tooltip"
                      matTooltip="{{'Rename' | translate}}" #tooltip="matTooltip" matTooltipPosition='below'
                      matTooltipHideDelay="100">
                      <!-- <div class="selected-namespace-wpr" style="display: flex; flex-direction: row; gap: 12px; align-items: center;">  -->
                      <div class="selected-namespace">
                       {{selectedNamespace?.name}}
                      </div>

                      <!-- </div> -->
                    </div>

                    <input *ngIf="namespaceIsEditable" id="namespace-name-input"
                      [ngStyle]="{ 'width': namespaceNameOutputElWidth }" class="namespace-name-input" type="text"
                      [(ngModel)]="selectedNamespace.name" (keypress)="onPressEnterUpdateNamespaceName($event)"
                      (focus)="onFocusNamespaceName($event.target.value)"
                      (ngModelChange)="onChangeNamespaceName($event)" (blur)="onBlurUpdateNamespaceName($event)">

                    <div *ngIf="selectedNamespace?.default" class="kb-default-badge">Default</div>
                  </div>

                  

                  <!-- <button mat-icon-button (click)="openDialogKbList()">
                                  <mat-icon>view_list</mat-icon>
                                </button> -->

                  <!-- ----------- MAT-MENU ----------- -->
                  <button id="select-namespace" mat-icon-button [matMenuTriggerFor]="namespaceList"
                    aria-label="namespaceList" matTooltipClass="kb-custom-mat-tooltip"
                    matTooltip="{{ 'KbPage.AddNewKbOrSelectExistingOne' | translate }}" #tooltip="matTooltip"
                    matTooltipPosition='right' matTooltipHideDelay="100">
                    <mat-icon>unfold_more</mat-icon>
                  </button>



                  <mat-menu #namespaceList="matMenu">
                    <button style="padding: 0 10px" class="mat-menu-custom-btn" mat-menu-item
                      (click)="presentModalAddNewNamespace()">
                      <mat-icon>add</mat-icon>
                      <span>{{ 'KbPage.NewNamespace' | translate }}</span>
                    </button>

                    <button [ngClass]="{'active--namespace': namespace.name === selectedNamespace.name}" mat-menu-item
                      *ngFor="let namespace of namespaces" (click)="onSelectNamespace(namespace)">
                      <div class="namespace-name-in-menu-wpr">
                        <div class="namespace-name-in-menu">{{namespace?.name}}</div>
                        <div *ngIf="namespace?.default" class="kb-default-badge-in-menu-wpr">
                          <span class="kb-default-badge-in-menu">
                            Default
                          </span>

                        </div>
                      </div>
                    </button>
                  </mat-menu>
                 <!-- engine   {{ selectedNamespace?.engine?.type}} -->
                  <div class="hybrid-search-wpr" *ngIf="selectedNamespace?.engine?.type === 'serverless'"
                      matTooltipClass="kb-custom-mat-tooltip"
                      matTooltip="This Knowledge Base is enabled for hybrid search" 
                      #tooltip="matTooltip" 
                      matTooltipPosition='below'
                      matTooltipHideDelay="100">
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                      viewBox="0 0 218.3 218.3" style="enable-background:new 0 0 218.3 218.3;" xml:space="preserve" style="width: 25px;  height: 25px;  margin-top: 8px;">
                      <style type="text/css">
                        .st0{fill:#C065A8;}
                        .st1{fill:none;}
                      </style>
                      <g id="JmLABx.tif">
                        <g>
                          <path class="st0" d="M109.6,2c4.5,0,9,0,13.4,0c6.3,0,6.5,0.3,6.5,6.4c0,6.8,0.1,13.6,0,20.4c-0.1,3.6,1.3,5.4,4.7,6.5
                            c3.8,1.2,7.5,2.7,11,4.6c2.6,1.4,4.2,0.9,6-1.1c5.3-5.5,10.8-10.8,16.1-16.3c2.2-2.3,3.9-2.4,6.2-0.1c7.3,7.5,14.7,14.9,22.2,22.2
                            c2.6,2.5,2.1,4.3-0.2,6.6c-5.4,5.2-10.5,10.6-15.9,15.8c-2.3,2.2-2.6,4.1-1.1,7c1.9,3.7,3.4,7.6,4.7,11.5c1,3,2.7,4.3,5.8,4.2
                            c7.1-0.1,14.3,0.1,21.4-0.1c4.2-0.1,6,1.2,5.9,5.7c-0.2,9.3-0.2,18.6,0,27.9c0.1,4.5-1.8,5.8-6,5.6c-6.8-0.2-13.6,0.1-20.4-0.1
                            c-3.6-0.1-5.9,1-7,4.7c-1.2,4-2.7,7.9-4.9,11.4c-1.8,2.8-1,4.8,1.3,7c5.5,5.3,10.8,10.8,16.3,16.1c1.9,1.9,2.2,3.1,0.1,5.2
                            c-7.5,7.2-15,14.6-22.2,22.1c-2.7,2.8-4.3,2.5-6.8-0.1c-5.1-5.4-10.6-10.5-15.8-15.9c-1.9-2-3.6-2.4-6.1-1
                            c-3.2,1.7-6.5,3.5-10,4.3c-5,1.1-6.1,3.9-5.9,8.5c0.3,6.8,0,13.6,0.1,20.4c0.1,3.7-1.5,5-5,5c-10-0.1-19.9-0.1-29.9,0
                            c-4,0.1-5.2-1.8-5.1-5.5c0.2-7.3-0.1-14.6,0.1-21.9c0.1-3.3-1.2-5.1-4.4-6.2c-3.8-1.2-7.5-2.8-11-4.6c-2.9-1.5-4.8-1.1-7,1.2
                            c-5.5,5.7-11.3,11.2-16.8,17c-2.1,2.3-3.3,2.2-5.5,0c-7.2-7.6-14.6-15-22.1-22.3c-2.5-2.5-2.4-4.1,0.1-6.5
                            c5.4-5.1,10.5-10.6,15.9-15.8c2.4-2.3,3-4.3,1.4-7.4c-1.9-3.7-3.5-7.5-4.8-11.5c-1.1-3.3-3-4.4-6.3-4.3c-7,0.1-13.9-0.1-20.9,0.1
                            c-4,0.1-5.6-1.4-5.6-5.5c0.2-9.8,0.1-19.6,1-29.3c0.3-3.2,1.7-4.3,4.7-4.3c6.8,0.1,13.6-0.1,20.4,0c3.5,0.1,5.4-1.1,6.5-4.6
                            c1.2-4,2.8-7.8,4.7-11.5c1.6-3.1,0.8-5.1-1.5-7.4C32.6,61.2,27.7,56,22.6,51.1c-2.3-2.2-2.5-3.9-0.1-6.2
                            c7.2-7.3,14.4-14.7,21.4-22.2c2.4-2.6,4.2-2.4,6.5,0c5.2,5.4,10.6,10.5,15.8,15.9c2.2,2.3,4.1,3.1,6.9,1.1
                            c3.7-2.6,8.1-3.9,12.4-5.1c3.3-0.9,4.5-2.8,4.4-6.2c-0.1-7.1,0.1-14.3-0.1-21.4c-0.1-3.6,1.3-5.2,5-5C99.6,2.1,104.6,2,109.6,2z
                            M171.5,109.2c0.6-39.2-36-67.6-70.8-62.4c-25.2,3.7-45.4,20.9-52.8,46.5c-6.5,22.6,2.2,49.3,21,64.5
                            c21.1,17.1,50.3,18.9,73.4,4.4c3-1.9,4.8-1.9,7.2,0.7c3.6,3.9,7.4,7.6,11.2,11.3c12.1,11.5,7.1,11.7,19.9-0.3
                            c2.3-2.1,2.1-3.6-0.1-5.7c-6.1-5.9-11.9-12.1-18-17.9c-2.7-2.5-2.9-4.6-0.8-7.7C168.4,132.5,171.5,121.2,171.5,109.2z"/>
                          <path class="st0" d="M62.8,108.4c0.1-30.2,29.2-52.1,58.4-44c3.5,1,4.3,2,2.3,5.4c-4.6,7.7-3.5,15.9,2.6,21.8
                            c6,5.8,14,6.7,21.5,1.9c3.1-2,4.3-1.9,5.5,1.8c8.7,26.2-9.3,54.8-36.6,59.5C88.2,159.6,61.2,136.1,62.8,108.4z M116.7,94.7
                            c-3.2,0.2-4.9,2.3-4.8,5.5c0.1,3.3,2.2,5.3,5.5,5.1c3.3-0.2,5.1-2.3,5-5.6C122.3,96.4,120.3,94.6,116.7,94.7z"/>
                        </g>
                      </g>
                      <rect x="-1.2" y="-169.7" class="st1" width="263" height="265"/>
                    </svg>
                  </div>

                </div>

              
              </div>






              <!-- <div class="header-first-column">
                  <div class="header-first-column-namespace">
                    <div class="selected-namespace-label">
                      Knowledge base:
                    </div>
                    <div class="selected-namespace-content">
                      <div id="selected-namespace-name" class="selected-namespace-name" (mouseover)="onMouseOver()"
                        (mouseout)="onMouseOut()">
                
                        <div *ngIf="!namespaceIsEditable" id="namespace-name-output" class="namespace-name-output"
                          (click)="hasClickedNamespaceName()" matTooltipClass="kb-custom-mat-tooltip"
                          matTooltip="{{'Rename' | translate}}" #tooltip="matTooltip" matTooltipPosition='below'
                          matTooltipHideDelay="100">
                          {{selectedNamespace?.name}}
                        </div>
                
                        <input *ngIf="namespaceIsEditable" id="namespace-name-input" [ngStyle]="{ 'width': namespaceNameOutputElWidth }"
                          class="namespace-name-input" type="text" [(ngModel)]="selectedNamespace.name"
                          (keypress)="onPressEnterUpdateNamespaceName($event)" (focus)="onFocusNamespaceName($event.target.value)"
                          (ngModelChange)="onChangeNamespaceName($event)" (blur)="onBlurUpdateNamespaceName($event)">
                      </div>
                
                      <button id="select-namespace" mat-icon-button [matMenuTriggerFor]="namespaceList" aria-label="namespaceList"
                        matTooltipClass="kb-custom-mat-tooltip" matTooltip="{{ 'KbPage.AddNewKbOrSelectExistingOne' | translate }}"
                        #tooltip="matTooltip" matTooltipPosition='below' matTooltipHideDelay="100">
                        <mat-icon>unfold_more</mat-icon>
                      </button>
                
                
                
                      <mat-menu #namespaceList="matMenu">
                        <button style="padding: 0 10px" class="mat-menu-custom-btn" mat-menu-item
                          (click)="presentModalAddNewNamespace()">
                          <mat-icon>add</mat-icon>
                          <span>{{ 'KbPage.NewNamespace' | translate }}</span>
                        </button>
                
                        <button [ngClass]="{'active--namespace': namespace.name === selectedNamespace.name}" mat-menu-item
                          *ngFor="let namespace of namespaces" (click)="onSelectNamespace(namespace)">
                          <span>{{namespace?.name}}</span>
                        </button>
                      </mat-menu>
                    </div>
                    
                  </div>
                  <div *ngIf="selectedNamespace?.default" class="badge-container">
                    <div class="default-badge">Default</div>
                  </div>
                </div> -->
              <!-- --------- ./ MAT-MENU ---------- -->

              <!-- ---------------------------------------- -->
              <!-- Delete KB / CONTENT -->
              <!-- ---------------------------------------- -->


              <!-- matTooltipClass="kb-custom-mat-tooltip" 
                    matTooltip="{{ 'KbPage.DeleteKb' | translate }}"
                    #tooltip="matTooltip" 
                    matTooltipPosition='below' 
                    matTooltipHideDelay="100" -->
              <div class="buttons-div">

                <button class="btn btn-blu-gray-outline" matTooltipClass="kb-custom-mat-tooltip"
                  matTooltip="{{'KbPage.ExportContents' | translate }}" #tooltip="matTooltip" matTooltipPosition='below'
                  matTooltipHideDelay="100" (click)="presentDialogExportContents()">
                  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px">
                    <path
                      d="M480-320 280-520l56-58 104 104v-326h80v326l104-104 56 58-200 200ZM240-160q-33 0-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0 33-23.5 56.5T720-160H240Z" />
                  </svg>


                  <!-- <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px">
                    <path
                      d="M260-160q-91 0-155.5-63T40-377q0-78 47-139t123-78q17-72 85-137t145-65q33 0 56.5 23.5T520-716v242l64-62 56 56-160 160-160-160 56-56 64 62v-242q-76 14-118 73.5T280-520h-20q-58 0-99 41t-41 99q0 58 41 99t99 41h480q42 0 71-29t29-71q0-42-29-71t-71-29h-60v-80q0-48-22-89.5T600-680v-93q74 35 117 103.5T760-520q69 8 114.5 59.5T920-340q0 75-52.5 127.5T740-160H260Zm220-358Z" />
                  </svg> -->

                </button>

                <button class="btn btn-blu-gray-outline" matTooltipClass="kb-custom-mat-tooltip"
                  matTooltip="{{'KbPage.ImportContents' | translate }}" #tooltip="matTooltip" matTooltipPosition='below'
                  matTooltipHideDelay="100" (click)="presentDialogImportContents()">
                  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px">
                    <path
                      d="M440-320v-326L336-542l-56-58 200-200 200 200-56 58-104-104v326h-80ZM240-160q-33 0-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0 33-23.5 56.5T720-160H240Z" />
                  </svg>


                  <!-- <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px">
                    <path
                      d="M260-160q-91 0-155.5-63T40-377q0-78 47-139t123-78q25-92 100-149t170-57q117 0 198.5 81.5T760-520q69 8 114.5 59.5T920-340q0 75-52.5 127.5T740-160H520q-33 0-56.5-23.5T440-240v-206l-64 62-56-56 160-160 160 160-56 56-64-62v206h220q42 0 71-29t29-71q0-42-29-71t-71-29h-60v-80q0-83-58.5-141.5T480-720q-83 0-141.5 58.5T280-520h-20q-58 0-99 41t-41 99q0 58 41 99t99 41h100v80H260Zm220-280Z" />
                  </svg> -->
                </button>


                <button id="delete-kb" class="btn btn-red" [disabled]="addButtonDisabled" aria-label="Delete"
                  style="text-transform: capitalize;" (click)="onOpenDeleteNamespaceModal()">
                  <!-- <span class=""> {{ 'KbPage.Add' | translate }} </span> -->
                  <!-- <span class="material-icons-round" style="vertical-align: middle;">
                      delete
                    </span> -->
                  <!-- {{ 'KbPage.DeleteNamespace' | translate }} -->
                  <span *ngIf="selectedNamespace.default === false">
                    {{ 'Delete' | translate }}
                  </span>
                  <span *ngIf="selectedNamespace.default === true">
                    {{'KbPage.DeleteNamespace' | translate}}
                  </span>

                </button>

                <!-- ---------------------------------------- -->
                <!-- AI Settings -->
                <!-- ---------------------------------------- -->
                <!-- <button id="ai-settings" class="custom-button preview-settings"
                    (click)="$event.stopPropagation(); onOpenBaseModalPreviewSettings()"
                    matTooltipClass="kb-custom-mat-tooltip" matTooltip="AI settings" #tooltip="matTooltip"
                    matTooltipPosition='below' matTooltipHideDelay="100">
                    <span class="material-icons-round">settings</span>
                  </button> -->

                <!-- ---------------------------------------- -->
                <!-- KB preview -->
                <!-- ---------------------------------------- -->
                <!-- <button id="kb-preview" class="custom-button preview" aria-label="Preview"
                    (click)="$event.stopPropagation(); onOpenBaseModalPreview()" [disabled]="kbsListCount === 0"
                    [ngClass]="{'preview-btn-disabled': kbsListCount === 0}" matTooltipClass="kb-custom-mat-tooltip"
                    [matTooltip]="kbsListCount === 0 ? ( 'KbPage.AddContentsToUseTheKBPreview' | translate ) : ( 'KbPage.KBpreview' | translate ) "
                    #tooltip="matTooltip" matTooltipPosition='below' matTooltipHideDelay="100">
                    <span class="material-icons-round">play_arrow</span>
                    <span class=""> {{'Preview' | translate}} </span>
                  </button> -->

                <!-- ---------------------------------------- -->
                <!-- Add Content -->
                <!-- ---------------------------------------- -->
                <!-- <div class="add-kb-div">
                    <button id="kb-add-content" class="custom-button add-content" [disabled]="addButtonDisabled"
                      [matMenuTriggerFor]="menu">
                      <span class=""> {{ 'KbPage.Add' | translate }} </span>
                    </button>
                    <mat-menu #menu="matMenu" xPosition="before" class="custom-menu" style="width: 150px;">
                      <add-content-menu class="mat-menu"
                        (openAddKnowledgeBaseModal)="openAddKnowledgeBaseModal($event)">
                      </add-content-menu>
                    </mat-menu>
                  </div> -->

                <!-- <div id="other-actions" class="other-actions">
                    <button mat-icon-button [matMenuTriggerFor]="otherActions" aria-label="other-actions">
                      <mat-icon>more_horiz</mat-icon>
                    </button>

                    <mat-menu #otherActions="matMenu">
                      <button mat-menu-item (click)="restartTour()">
                        <mat-icon>restart_alt</mat-icon>
                        <span>{{ 'KbPage.RestartTour' | translate }}</span>
                      </button>
                    </mat-menu>
                  </div> -->
              </div>
            </div>

            <!-- --------------------------------------- -->
            <!-- Chatbots that used current KB -->
            <!-- --------------------------------------- -->
            <div class="chatbot-using-current-namespace-wpr">
              <div *ngIf="chatbotsUsingNamespace && chatbotsUsingNamespace?.length > 0"
                class="chatbot-using-current-namespace">
                {{ 'KbPage.ThisKnowledgeBaseisUsedByTheChatbots' | translate }}:
              </div>

              <!-- <div class="chatbot-list-using-current-namespace" *ngFor="let chatbot of chatbotsUsingNamespace">
                <div class="chatbot-name-using-namespace" (click)="presentDialogGoToCDS(chatbot)"
                  matTooltipClass="kb-custom-mat-tooltip" matTooltip="Visualizza nel design studio"
                  #tooltip="matTooltip" matTooltipPosition='below' matTooltipHideDelay="100">

                  {{chatbot.name }}
                </div>
              </div> -->


              <!-- -------------------------------- -->
              <div id="kb-chatbot" class="served-by-cb-wpr">
                <div class="served-by-cb-b" *ngFor="let chatbot of chatbotsUsingNamespace; let first = first;">
                  <div [ngClass]="{ 'first-served-by': first, 'disable-link-if-is-agent': USER_ROLE === 'agent' }"
                    class="served-by-cb-c" (click)="presentDialogGoToCDS(chatbot)"
                    matTooltipClass="kb-custom-mat-tooltip" matTooltip=" {{'ViewOption' | translate}}"
                    #tooltip="matTooltip" matTooltipPosition='left' matTooltipHideDelay="100">

                    <!-- [satPopoverAnchor]="cbPopover"
                      (mouseenter)="cbPopover.open(); hoveredChatbot = chatbot" 
                      (mouseleave)="cbPopover.toggle()" -->
                    <div class="served-by-cb-d">
                      <div size="32" class="served-by-cb-e">

                        <!-- --------------------------------------------------- -->
                        <!-- USECASE uploadEngine Firebase -->
                        <!-- --------------------------------------------------- -->

                        <img *ngIf="UPLOAD_ENGINE_IS_FIREBASE"
                          [ngClass]="{'bot-img-gray-bckgrnd': chatbot.hasImage === false}"
                          src="https://firebasestorage.googleapis.com/v0/b/{{storageBucket}}/o/profiles%2F{{chatbot?._id}}%2Fphoto.jpg?alt=media"
                          alt="" onerror="this.src='assets/img/avatar_bot_tiledesk.svg'">

                        <!-- --------------------------------------------------- -->
                        <!-- USECASE uploadEngine Native -->
                        <!-- --------------------------------------------------- -->
                        <img *ngIf="!UPLOAD_ENGINE_IS_FIREBASE"
                          [ngClass]="{'bot-img-gray-bckgrnd': chatbot.hasImage === false}"
                          src="{{baseUrl}}images?path=uploads%2Fusers%2F{{chatbot?._id}}%2Fimages%2Fthumbnails_200_200-photo.jpg"
                          alt="" onerror="this.src='assets/img/avatar_bot_tiledesk.svg'">

                      </div>
                      <div class="served-by-cb-name">
                        {{chatbot.name }}
                      </div>

                      <!-- <div *ngIf="chatbot.type === 'internal'">
                        <img class="home-served-by-bot-type-logo" style="left: -1px;top: 3px;"
                          src="assets/img/tiledesk_logo_no_text.png" />
                      </div>
                      <div *ngIf="chatbot.type === 'external'">
                        <img class="home-served-by-bot-type-logo" style="left: -1px;top: 3px;"
                          src="assets/img/external_bot_logo.png" />
                      </div>
                      <div *ngIf="chatbot.type === 'dialogflow'">
                        <img class="home-served-by-bot-type-logo" style="left: -1px;top: 3px;"
                          src="assets/img/Dialogflow_logo_no_text.png" />
                      </div>
                      <div *ngIf="chatbot.type === 'rasa'">
                        <img class="home-served-by-bot-type-logo" style="left: -1px;top: 3px;"
                          src="assets/img/rasa_bot_logo.png" />
                      </div>

                      <div *ngIf="chatbot.type === 'tilebot'">
                        <img class="home-served-by-bot-type-logo" style="left: -1px;top: 3px;"
                          src="assets/img/tilebot_logo_small.png" />
                      </div>   -->
                    </div>
                  </div>
                </div>
              </div>

              <sat-popover #cbPopover horizontalAlign="center" verticalAlign="below" panelClass="cb-details-popover">

                <div class="cbPopover-cbname">
                  <!-- {{chatbot.name }} -->
                  <!-- {{hoveredChatbot.name}} -->
                  {{hoveredChatbot?.name }}
                </div>

                <div class="cbPopover-cbtext">
                  <!-- View in the design studio -->
                  {{'ViewInTheDesignStudio' | translate}}
                </div>

              </sat-popover>



              <!-- ---------------------------------------- -->

              <!-- --------------------------------------- -->
              <!-- Create a Chatbot that use current KB -->
              <!-- --------------------------------------- -->
              <div *ngIf="!chatbotsUsingNamespace" class="chatbot-using-current-namespace">
                <!-- This namespace is not used by any chatbot -->
                {{ 'KbPage.ThisKBisReadyToUse' | translate }}

                <!-- esportingKBChatBotTemplate >  {{ esportingKBChatBotTemplate}} -->
                <button class="custom-button xs" style="margin-left: 6px;"
                  (click)="createChatbotfromKbOfficialResponderTemplate()">

                  <span *ngIf="!esportingKBChatBotTemplate">

                    <!-- {{ 'CreateYuorAIAgent' | translate }} -->
                    {{ 'CreateYourAIAgentWithOneClick' | translate }}
                  </span>
                  <span *ngIf="esportingKBChatBotTemplate">
                    {{ 'Processing' | translate }}
                  </span>
                </button>
              </div>

              <!-- <div id="kb-no-chatbot" *ngIf="!chatbotsUsingNamespace" class="create-new-chatbot-btn-wpr">
                  <button class="custom-button xs" (click)="createChatbotfromKbOfficialResponderTemplate()">
                    <span>
                      {{ 'CreateChatbot' | translate }}
                    </span>
                  </button>
                </div> -->

            </div>

            <!-- START TABLE -->
            <knowledge-base-table [kbsList]="kbsList" [kbsListCount]="kbsListCount" [refresh]="refreshKbsList"
              [hasRemovedKb]="hasRemovedKb" [hasUpdatedKb]="hasUpdatedKb" [getKbCompleted]="getKbCompleted"
              [selectedNamespaceName]="selectedNamespaceName" [hasAlreadyVisitedKb]="hasAlreadyVisitedKb"
              [isAvailableRefreshRateFeature]="isAvailableRefreshRateFeature" [t_params]="t_params"
              [refreshRateIsEnabled]="refreshRateIsEnabled" [payIsVisible]="payIsVisible" [salesEmail]="salesEmail"
              [project_name]="project_name" [id_project]="id_project"
              (openBaseModalDetail)="onOpenBaseModalDetail($event)"
              (openBaseModalDelete)="onOpenBaseModalDelete($event)"
              (openBaseModalNamespaceDelete)="onOpenBaseModalNamespaceDelete()"
              (openBaseModalPreview)="onOpenBaseModalPreview()" (onOpenAddContents)="onOpenAddContent()"
              (openBaseModalPreviewSettings)="onOpenBaseModalPreviewSettings()"
              (openAddKnowledgeBaseModal)="openAddKnowledgeBaseModal($event)" (checkStatus)="onCheckStatus($event)"
              (runIndexing)="onRunIndexing($event)" (loadPage)="onLoadPage($event)"
              (loadByFilter)="onLoadByFilter($event)">
            </knowledge-base-table>
            <!-- END TABLE -->

          </div>
        </div>

      </div>

    </div>
    <!-- </div> -->
  </div>
</div>


<!-- ADD KNOWLEDGE BASE MODAL - START -->
<modal-page-url *ngIf="typeKnowledgeBaseModal == 'url-page'" (saveKnowledgeBase)="onAddKb($event)"
  (closeBaseModal)="onCloseBaseModal()">
</modal-page-url>

<!-- <modal-text-file *ngIf="typeKnowledgeBaseModal == 'text-file'" 
  (saveKnowledgeBase)="onAddKb($event)"
  (closeBaseModal)="onCloseBaseModal()">
</modal-text-file> -->

<!-- <modal-site-map *ngIf="typeKnowledgeBaseModal == 'site-map'" 
  [listSitesOfSitemap]="listSitesOfSitemap"
  (sendSitemap)="onSendSitemap($event)" 
  (saveKnowledgeBase)="onAddMultiKb($event)"
  (closeBaseModal)="onCloseBaseModal()">
</modal-site-map> -->

<!-- <modal-urls-knowledge-base *ngIf="typeKnowledgeBaseModal == 'urls'"
 (saveKnowledgeBase)="onAddMultiKb($event)"
  (closeBaseModal)="onCloseBaseModal()">
</modal-urls-knowledge-base> -->
<!-- ADD KNOWLEDGE BASE MODAL - END -->


<!-- DETAIL KNOWLEDGE BASE MODAL - START -->
<!-- <modal-detail-knowledge-base *ngIf="baseModalDetail" 
  [kb]="kbid_selected" 
  (updateKnowledgeBase)="onUpdateKb($event)"
  (closeBaseModal)="onCloseBaseModal()">
</modal-detail-knowledge-base> -->
<!-- DETAIL KNOWLEDGE BASE MODAL - END -->

<!-- DELETE KNOWLEDGE BASE MODAL - START -->
<!-- <modal-delete-knowledge-base *ngIf="baseModalDelete" 
  [kb]="kbid_selected"
  (deleteKnowledgeBase)="onDeleteKnowledgeBase($event)" 
  (closeBaseModal)="onCloseBaseModal()">
</modal-delete-knowledge-base> -->
<!-- DELETE KNOWLEDGE BASE MODAL - END -->

<!-- DELETE NAMESPACE MODAL - START -->
<!-- <modal-delete-namespace *ngIf="showDeleteNamespaceModal" 
  (deleteNamespace)="onDeleteNamespace($event)"
  (closeModal)="closeDeleteNamespaceModal()" 
  [selectedNamespace]="selectedNamespace"
  [kbsList]="kbsList">
</modal-delete-namespace> -->
<!-- DELETE NAMESPACE MODAL - END -->

<!-- PREVIEW KNOWLEDGE BASE MODAL - START -->
<!-- <modal-preview-knowledge-base *ngIf="baseModalPreview" 
  [selectedNamespace]="selectedNamespace"
  (closeBaseModal)="onCloseBaseModal()">
</modal-preview-knowledge-base> -->
<!-- PREVIEW KNOWLEDGE BASE MODAL - END -->

<!-- <modal-preview-settings *ngIf="baseModalPreviewSettings" 
  [selectedNamespace]="selectedNamespace"
  (closeBaseModal)="onCloseBaseModal()">
</modal-preview-settings> -->

<!-- ERROR KNOWLEDGE BASE MODAL - START -->
<modal-error-knowledge-base *ngIf="baseModalError" [errorMessage]="errorMessage" (closeBaseModal)="onCloseBaseModal()">
</modal-error-knowledge-base>
<!-- ERROR KNOWLEDGE BASE MODAL - END -->