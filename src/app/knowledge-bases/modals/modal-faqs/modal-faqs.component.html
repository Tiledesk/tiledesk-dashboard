<div class="m-header">
  <h1 mat-dialog-title style="margin-bottom: 0px;">
    {{ 'FaqPage.AddFaqs' | translate }}

  </h1>
  <div class="m-top-right-icon">
    <span class="material-icons-outlined" (click)="onCloseBaseModal()">
      close
    </span>
  </div>
</div>
<!-- <h2 mat-dialog-subtitle> {{ 'KbPage.AddManually' | translate }} </h2> -->

<!-- displayUploadFromCSVSection > {{ displayUploadFromCSVSection }} displayAddManuallySection >
{{displayAddManuallySection}} -->
<div mat-dialog-content *ngIf="displayUploadFromCSVSection === false && displayAddManuallySection === false">

  <div class="add-faqs-cards-wpr">

    <!-- -------------------------------- -->
    <!-- Add single manually -->
    <!-- -------------------------------- -->
    <div class="add-faqs-card-wpr" (click)="changeSectionToAddFaqsManually()">
      <div class="add-content-card-content">
        <div class="add-content-card-content-icon-wpr">
          <span>
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="none">
              <path d="M0 0h24v24H0V0z" fill="none" />
              <path
                d="M22 4c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4V4zm-2 13.17L18.83 16H4V4h16v13.17zM13 5h-2v4H7v2h4v4h2v-4h4V9h-4z" />
            </svg>
          </span>
        </div>
        <span class="span-12"></span>
        <p class="add-content-card-content-title"> {{ 'KbPage.AddManually' | translate }} </p>
        <span class="span-8"></span>
        <p class="add-content-card-content-subtitle">
          <!-- Manually write your own specific Q&As -->
          {{ 'KbPage.ManuallyWriteQ&As' | translate }}
        </p>
      </div>
    </div>

    <!-- -------------------------------- -->
    <!-- Add FAQs from CSV -->
    <!-- -------------------------------- -->
    <div class="add-faqs-card-wpr" (click)="changeSectionToUploadFaqsFromCSV()">
      <div class="add-content-card-content">
        <div class="add-content-card-content-icon-wpr">
          <span>
            <!-- <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="none"
              style="transform: rotate(-45deg);">
              <path
                d="M440-280H280q-83 0-141.5-58.5T80-480q0-83 58.5-141.5T280-680h160v80H280q-50 0-85 35t-35 85q0 50 35 85t85 35h160v80ZM320-440v-80h320v80H320Zm200 160v-80h160q50 0 85-35t35-85q0-50-35-85t-85-35H520v-80h160q83 0 141.5 58.5T880-480q0 83-58.5 141.5T680-280H520Z">
              </path>
            </svg> -->
            <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24"
              width="24px" fill="none">
              <g>
                <rect fill="none" height="24" width="24" />
              </g>
              <g>
                <g>
                  <path
                    d="M14,2H6C4.9,2,4.01,2.9,4.01,4L4,20c0,1.1,0.89,2,1.99,2H18c1.1,0,2-0.9,2-2V8L14,2z M18,20H6V4h7v5h5V20z M8,15.01 l1.41,1.41L11,14.84V19h2v-4.16l1.59,1.59L16,15.01L12.01,11L8,15.01z" />
                </g>
              </g>
            </svg>
          </span>
        </div>
        <span class="span-12"></span>
        <p class="add-content-card-content-title"> {{ 'KbPage.ImportFromCSV' | translate }} </p>
        <span class="span-8"></span>
        <p class="add-content-card-content-subtitle">
          {{ 'KbPage.AddMultipleQ&AsAtOnce' | translate }}
        </p>
      </div>
    </div>
  </div>
</div>
<!-- ---------------------------------- -->
<!-- Section Adds single FAQ -->
<!-- ---------------------------------- -->
<div mat-dialog-content *ngIf="displayAddManuallySection === true">
  <div class="second-section-subheader">
    <div class="go-to-first-section-wpr" *ngIf="showBackButton">
      <div class="go-to-first-section" (click)="goBack()">
        <span class="material-icons-outlined" style="vertical-align: middle;font-size: 20px;">
          arrow_back
        </span>
        <span>
          {{'Back' | translate}}
        </span>
      </div>
    </div>

    <!-- <div class="sutitle-in-upload-from-csv-section ">
      {{ 'KbPage.AddManually' | translate }}
    </div> -->

    <div class="second-section-subheader-right-column"> </div>
  </div>

  <div class="info-container">
    <i class="material-icons-outlined info-icon">help_outline</i>
    <div class="info-text">
      <p>{{ 'KbPage.AddKbInfoTextContent' | translate }}</p>
      <!-- <p>{{ 'KbPage.AddKbInfoTextContentMsg1' | translate }}</p> -->
      <p [innerHTML]="'KbPage.AddKbInfoTextContentMsg1' | translate" style="margin-top: 8px;"></p>
    </div>
  </div>


  <div class="form-container">
    <form [formGroup]="kbForm">
      <div class="input-container">
        <span class="input-label">{{ 'FaqEditAddPage.Question' | translate }}</span>
        <!-- placeholder="{{ 'KbPage.TypeKbNamePlaceholder' | translate }}"  -->
        <input type="text" name="name" class="custom-input" [(ngModel)]="kb.name" formControlName="name"
          (input)="onChangeInput($event)"
          [class.invalid]="(kbForm.controls.name.errors?.pattern || kbForm.controls.name.errors?.required) && kbForm.controls.name.touched">
        <span class="input-label">{{ 'FaqEditAddPage.Answer' | translate }}</span>

        <!-- placeholder="{{ 'KbPage.TypeKbContentPlaceholder' | translate }}"  -->
        <textarea type="text" name="content" class="custom-textarea" [(ngModel)]="kb.content" formControlName="content"
          (input)="onChangeInput($event)" rows="4"
          [class.invalid]="(kbForm.controls.content.errors?.pattern || kbForm.controls.content.errors?.required) && kbForm.controls.content.touched">
        </textarea>

      </div>
    </form>
  </div>

</div>

<!-- ---------------------------------- -->
<!-- Section Upload FAQs from csv -->
<!-- ---------------------------------- -->
<div mat-dialog-content *ngIf="displayUploadFromCSVSection === true">
  <div class="dialog-content-first-to-upload" *ngIf="displayAfterUploadFromCSVSection === false">
    <div class="second-section-subheader">
      <div class="go-to-first-section-wpr" *ngIf="showBackButton">
        <div class="go-to-first-section" (click)="goBack()">
          <span class="material-icons-outlined" style="vertical-align: middle;font-size: 20px;">
            arrow_back
          </span>
          <span>
            {{'Back' | translate}}
          </span>
        </div>
      </div>

      <div class="sutitle-in-upload-from-csv-section ">
        {{ 'KbPage.ImportFromCSV' | translate }}
      </div>

      <div class="second-section-subheader-right-column"> </div>
    </div>

    <div class="upload-from-csv-container">

      <div class="info-container">
        <i class="material-icons-outlined info-icon">help_outline</i>
        <div class="info-text">
          <p>{{ 'KbPage.TheFileMustContainTheQAColumns' | translate }}</p>
     
          <p>{{ 'KbPage.TheColumnsMustBeSeparatedByTheDelimiter' | translate }}</p>
          <div class="download--example-csv-wpr"> 
            <p>{{ 'KbPage.AsStartingPointYouCanDownloadTheExampleFile' | translate }} </p> 
            <button class="download--example-csv"  (click)="downloadExampleCsv()"> {{ 'examplecsv' | translate }} </button>
          </div>
        </div>
      </div>

      <!-- <div class="download-example-csv-wpr">
        <div class="download-example-csv-button">
          <p (click)="downloadExampleCsv()" style="margin:5px; cursor:pointer">
            <i class="material-icons" style="font-size:18px; top: 4px; position: relative;">save_alt</i>
            {{ 'download' | translate }} <span style="font-weight:400"> {{ 'examplecsv' | translate }} </span>
          </p>
        </div>

        <div class="csv-file-preview">
     
          <span>
            <em>
              {{ 'FaqPage.Question' | translate }}*
            </em>
          </span>

      
          <span>
            <strong>
              {{csvColumnsDelimiter}}
            </strong>
          </span>

      
          <span>
            <em>
              {{ 'FaqPage.Answer' | translate }}*
            </em>
          </span>
        </div>
      </div> -->

      <div class="csv-file-delimiter-container">
        <div class="csv-file-delimiter-wpr">

          <div class="csv-file-delimiter-label">
            {{ 'FaqPage.ColumnsSeparatedWith' | translate }}
          </div>

          <div class="csv-file-delimiter-value">

            <input  [(ngModel)]="csvColumnsDelimiter" (keyup)="countDelimiterDigit($event)">
          </div>
        </div>

        <div class="columns-delimiter-error-msg" *ngIf="modalChoosefileDisabled">
          <!-- Delimiter option must be one character long  -->
          {{ 'FaqPage.DelimiterOptionMustBe' | translate }}
        </div>
      </div>
    </div>
  </div>

  <div class="dialog-content-after-to-upload" *ngIf="displayAfterUploadFromCSVSection === true">
    <div class="dialog-content-after-to-upload-processing" *ngIf="parse_err === undefined">
      <div class="sk-fading-circle-faqs-modal">
        <div class="sk-circle1 sk-circle"></div>
        <div class="sk-circle2 sk-circle"></div>
        <div class="sk-circle3 sk-circle"></div>
        <div class="sk-circle4 sk-circle"></div>
        <div class="sk-circle5 sk-circle"></div>
        <div class="sk-circle6 sk-circle"></div>
        <div class="sk-circle7 sk-circle"></div>
        <div class="sk-circle8 sk-circle"></div>
        <div class="sk-circle9 sk-circle"></div>
        <div class="sk-circle10 sk-circle"></div>
        <div class="sk-circle11 sk-circle"></div>
        <div class="sk-circle12 sk-circle"></div>
      </div>

      <!-- <div class="dialog-content-after-to-upload-msg"> 
        <p class="processing">Processing</p>
      </div> -->

    </div>
  </div>

  <div class="dialog-content-after-to-upload" *ngIf="displayAfterUploadFromCSVSection === true">
    <div class="dialog-content-after-to-upload-success" *ngIf="parse_err === false">



      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 130.2 130.2">
        <circle class="path circle" fill="none" stroke="#73AF55" stroke-width="6" stroke-miterlimit="10" cx="65.1"
          cy="65.1" r="62.1" />
        <polyline class="path check" fill="none" stroke="#73AF55" stroke-width="6" stroke-linecap="round"
          stroke-miterlimit="10" points="100.2,40.2 51.5,88.8 29.8,67.5 " />
      </svg>
      <div class="dialog-content-after-to-upload-msg">
        <p class="success">{{'FaqPage.FaqsSuccessfullyUploaded' | translate}}!</p>
      </div>
    </div>
    <!-- parse_err > {{parse_err}} -->
    <div class="dialog-content-after-to-upload-failure" *ngIf="parse_err === true">


      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 130.2 130.2">
        <circle class="path circle" fill="none" stroke="#D06079" stroke-width="6" stroke-miterlimit="10" cx="65.1"
          cy="65.1" r="62.1" />
        <line class="path line" fill="none" stroke="#D06079" stroke-width="6" stroke-linecap="round"
          stroke-miterlimit="10" x1="34.4" y1="37.9" x2="95.8" y2="92.3" />
        <line class="path line" fill="none" stroke="#D06079" stroke-width="6" stroke-linecap="round"
          stroke-miterlimit="10" x1="95.8" y1="38" x2="34.4" y2="92.2" />
      </svg>
      <div class="dialog-content-after-to-upload-msg">
        <p class="error">{{'FaqPage.AnErrorOccurredDuringTheUpload' | translate}}!</p>
      </div>
    </div>
  </div>
</div>

<div mat-dialog-actions style="justify-content: center;" *ngIf="displayUploadFromCSVSection === false && displayAddManuallySection === false">
  <!-- <button class="mat-dialog-ok-btn" mat-button (click)="changeSectionToUploadFaqsFromCSV()">
    {{ "FaqPage.UploadFaqsFromCsv" | translate }}
  </button>

  <button [disabled]="buttonDisabled" class="mat-dialog-ok-btn" mat-button (click)="onSaveKnowledgeBase('true')">
    {{ 'FaqPage.AddFaq' | translate }}
  </button> -->

  <button  class="mat-dialog-close-btn" mat-button (click)="onCloseBaseModal()">
    {{ "Close" | translate }}
  </button>

</div>

<div mat-dialog-actions style="justify-content: center;" *ngIf="displayAddManuallySection === true">

  <button [disabled]="buttonDisabled" class="mat-dialog-ok-btn" mat-button (click)="onSaveKnowledgeBase('true')">
    <!-- FaqPage.AddFaq -->
    {{ 'Save' | translate }}
  </button>

</div>


<div mat-dialog-actions style="justify-content: center;" *ngIf="displayUploadFromCSVSection === true">

  <div class="btn-before-upload-wpr" *ngIf="displayAfterUploadFromCSVSection === false">
    <input style="display:inline" name="fileChangeUploadCSV" id="fileChangeUploadCSV" class="inputfile" type="file"
      (change)="fileChangeUploadCSV($event)" accept=".csv" />
      <!-- btn btn-primary  -->
    <label class="btn btn-tdblu-no-boxshadow" for="fileChangeUploadCSV" [ngClass]="{'disabled': modalChoosefileDisabled }"
      style="height: 36px; padding: 8px 20px !important;">
      <!-- <i class="material-icons">file_upload</i> -->
     
       {{ 'FaqPage.ChooseFile' | translate }} 
    </label>
  </div>

  <div class="btn-after-upload-wpr" *ngIf="displayAfterUploadFromCSVSection === true">

    <button *ngIf="parse_err === true" class="mat-dialog-close-btn" mat-button (click)="onCloseBaseModal()">
      {{ "Close" | translate }}
    </button>

    <button *ngIf="parse_err === false" class="mat-dialog-ok-btn" mat-button (click)="onSaveKnowledgeBase('false')">
      {{ "Done" | translate }}
    </button>

    <button *ngIf="parse_err === undefined" class="mat-dialog-traspatent-btn" mat-button disabled>
      {{ "Processing" | translate }}
    </button>

  </div>
</div>